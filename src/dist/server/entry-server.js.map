{"version":3,"file":"entry-server.js","sources":["../../context.ts","../../i18n/translate.ts","../../i18n/context.tsx","../../hooks/use-services.ts","../../hooks/use-store.ts","../../hooks/use-init.ts","../../hooks/use-translate.ts","../../hooks/use-selector.ts","../../components/menu/index.tsx","../../utils/number-format.js","../../components/basket-tool/index.tsx","../../components/side-layout/index.tsx","../../store-redux/modals/actions.js","../../utils/unicque_id.js","../../containers/navigation/index.jsx","../../components/page-layout/index.tsx","../../components/head/index.tsx","../../components/select/index.tsx","../../components/input/index.tsx","../../utils/tree-to-list/index.js","../../utils/list-to-tree/index.js","../../assets/images/chevron_down.png","../../components/select-layout/index.tsx","../../hooks/use-select-custom.ts","../../containers/select-custom/index.tsx","../../components/button/index.tsx","../../containers/hoc/with-catalog-filter/index.jsx","../../components/item/index.tsx","../../components/list/index.tsx","../../components/pagination/index.tsx","../../components/spinner/index.tsx","../../containers/catalog-list/index.jsx","../../containers/locale-select/index.jsx","../../containers/top-head/index.jsx","../../app/main/index.tsx","../../components/article-card/index.tsx","../../store-redux/article/actions.js","../../app/article/index.tsx","../../components/field/index.tsx","../../app/login/index.tsx","../../components/profile-card/index.tsx","../../app/profile/index.tsx","../../containers/protected/index.jsx","../../components/item-basket/index.tsx","../../components/modal-layout/index.tsx","../../components/basket-total/index.tsx","../../utils/closeId/index.js","../../app/modals/basket/index.tsx","../../components/goods-quantity-layout/index.tsx","../../app/modals/goods-quantity/index.jsx","../../app/modals/goods/index.jsx","../../containers/modals/index.jsx","../../assets/images/avatar.png","../../components/chat-layout/chat-button/index.tsx","../../components/chat-layout/message-check/index.tsx","../../utils/time-from-date/index.ts","../../components/chat-layout/index.tsx","../../assets/images/smail.png","../../components/chat-layout/textarea/index.tsx","../../components/chat-layout/message-font/index.tsx","../../app/chat/index.tsx","../../components/draw-leaf/core/elements/figure.ts","../../utils/random-item.ts","../../assets/images/leaf/leave01.png","../../assets/images/leaf/leave02.png","../../assets/images/leaf/leave03.png","../../assets/images/leaf/leave04.png","../../assets/images/leaf/leave06.png","../../assets/images/leaf/leave07.png","../../assets/images/leaf/leave08.png","../../assets/images/leaf/leave09.png","../../assets/images/leaf/leave10.png","../../assets/images/leaf/leave11.png","../../assets/images/leaf/export.ts","../../utils/round-range.ts","../../components/draw-leaf/core/elements/leaf/index.ts","../../components/draw-leaf/core/index.ts","../../components/draw-leaf/index.tsx","../../app/leaf-fall/index.tsx","../../app/drawing/components/drawing-layout/index.tsx","../../app/drawing/tools/tool/index.ts","../../app/drawing/tools/brush/index.ts","../../app/drawing/tools/rectangle/index.ts","../../app/drawing/tools/circle/index.ts","../../app/drawing/tools/eraser/index.ts","../../app/drawing/tools/line/index.ts","../../app/drawing/tools/pointer/index.ts","../../app/drawing/tools/fall/index.ts","../../app/drawing/components/toolbar/index.tsx","../../app/drawing/components/setting-bar/index.tsx","../../app/drawing/components/canvas/index.tsx","../../app/drawing/index.tsx","../../app/index.tsx","../../api/index.ts","../../socket/index.ts","../../store/module.ts","../../store/basket/index.ts","../../utils/is-plain-object.js","../../utils/exclude/index.js","../../store/catalog/index.ts","../../store/modals/index.ts","../../store/article/index.ts","../../store/locale/index.ts","../../store/categories/index.ts","../../utils/simplify-errors.js","../../store/session/index.ts","../../store/profile/index.ts","../../store/catalog-modal/index.ts","../../store/countries/index.ts","../../store/chat/index.ts","../../store/canvas/index.ts","../../store/index.ts","../../store-redux/article/reducer.js","../../store-redux/modals/reducer.js","../../store-redux/index.ts","../../services.ts","../../config.ts","../../entry-server.tsx"],"sourcesContent":["import React from 'react';\r\nimport Services from './services';\r\n\r\n/**\r\n * Контекст для Services\r\n * @type {React.Context<Services>}\r\n */\r\nexport const ServicesContext: React.Context<Services | null> = React.createContext<Services | null>(null);\r\n\r\n","import * as translations from './translations'\r\nimport { ITranslateFn, ILangs, IAllLangs } from \"./types\"\r\n\r\n/**\r\n * Перевод фразу по словарю\r\n * @param lang {String} Код языка\r\n * @param text {String} Текст для перевода\r\n * @param [plural] {Number} Число для плюрализации\r\n * @returns {String} Переведенный текст\r\n */\r\nconst translate: ITranslateFn = (lang: ILangs, text: IAllLangs, plural?: number): string => {\r\n  let result = translations[lang] && (text in translations[lang])\r\n    ? translations[lang][text]\r\n    : text\r\n\r\n  if (typeof plural !== 'undefined' && typeof result === 'object'){\r\n    const key = new Intl.PluralRules(lang).select(plural)\r\n    \r\n    if (key in result) {\r\n      result = result[key as keyof typeof result]\r\n    }\r\n  }\r\n\r\n  return String(result)\r\n}\r\n\r\nexport default translate\r\n","import React, { createContext, useMemo, useState} from \"react\"\r\nimport translate from \"./translate\"\r\nimport { ILangs, IAllLangs } from \"./types\"\r\n\r\ninterface II18nProvide {\r\n  children: React.ReactNode\r\n}\r\n\r\nexport interface II18nContext {\r\n  lang: ILangs\r\n  setLang: (value: ILangs) => void\r\n  t: (text: IAllLangs, plural?: number) => string\r\n}\r\n\r\n/**\r\n * @type {React.Context<{}>}\r\n */\r\nexport const I18nContext = createContext<II18nContext>({} as II18nContext)\r\n\r\n /**\r\n  * Обертка над провайдером контекста, чтобы управлять изменениями в контексте\r\n  * @param children\r\n  * @return {JSX.Element}\r\n  */\r\nexport const I18nProvider: React.FC<II18nProvide> = ({ children }) => {\r\n  const [lang, setLang] = useState<ILangs>(\"ru\")\r\n\r\n  const i18n = useMemo<II18nContext>(\r\n    () => ({\r\n      // Код локали\r\n      lang,\r\n      // Функция для смены локали\r\n      setLang,\r\n      // Функция для локализации текстов с замыканием на код языка\r\n      t: (text, number) => translate(lang, text, number),\r\n    }),\r\n    [lang]\r\n  )\r\n\r\n  return <I18nContext.Provider value={i18n}>{children}</I18nContext.Provider>\r\n}\r\n","import {useContext} from \"react\"\r\nimport {ServicesContext} from \"../context\"\r\nimport Services from \"@src/services\"\r\n\r\n/**\r\n * Хук для доступа к сервисам\r\n * @return {Services}\r\n */\r\nexport default function useServices(): Services {\r\n  return useContext(ServicesContext) as Services\r\n}\r\n","import useServices from \"./use-services\"\r\nimport Store from \"@src/store\"\r\n\r\n/**\r\n * Хук для доступа к объекту хранилища\r\n * @return {Store}\r\n */\r\nexport default function useStore(): Store {\r\n  return useServices().store\r\n}\r\n","import { useEffect } from 'react';\r\n\r\n/**\r\n * Хук для асинхронных расчётов, которые будут исполнены при первом рендере или изменении depends.\r\n * @param initFunc {Function} Пользовательская функция\r\n * @param depends {Array} Значения при смене которых callback снова исполнится.\r\n * @param options {{backForward}}\r\n */\r\nexport default function useInit(initFunc: (arg?: Event | boolean) => void, depends = [], backForward = false) {\r\n  useEffect(() => {\r\n    initFunc(false);\r\n    // Если в истории браузера меняются только search-параметры, то react-router не оповестит\r\n    // компонент об изменениях, поэтому хук можно явно подписать на событие изменения истории\r\n    // браузера (если нужно отреагировать на изменения search-параметров при переходе по истории)\r\n    if (backForward) {\r\n      window?.addEventListener('popstate', initFunc);\r\n      return () => {\r\n        window?.removeEventListener('popstate', initFunc);\r\n      };\r\n    }\r\n  }, depends);\r\n}\r\n","import {useCallback, useContext} from \"react\";\r\n// import useStore from \"@src/store/use-store\";\r\n// import useSelector from \"@src/store/use-selector\";\r\n// import translate from \"@src/i18n/translate\";\r\nimport {I18nContext, II18nContext} from \"../i18n/context\";\r\n\r\n/**\r\n * Хук возвращает функцию для локализации текстов, код языка и функцию его смены\r\n */\r\nexport default function useTranslate(): II18nContext {\r\n  // const store = useStore();\r\n  // // Текущая локаль\r\n  // const lang = useSelector(state => state.locale.lang);\r\n  // // Функция для смены локали\r\n  // const setLang = useCallback(lang => store.actions.locale.setLang(lang), []);\r\n  // // Функция для локализации текстов\r\n  // const t = useCallback((text, number) => translate(lang, text, number), [lang]);\r\n  //\r\n  // return {lang, setLang, t};\r\n\r\n  return useContext(I18nContext);\r\n}\r\n","import {useEffect, useMemo, useState} from \"react\"\r\nimport shallowequal from 'shallowequal'\r\nimport useStore from \"./use-store\"\r\n\r\ntype SelectorFunc<State, Selected> = (state: State) => Selected;\r\n\r\nexport default function useSelector<State, Selected>(selectorFunc: SelectorFunc<State, Selected>): Selected {\r\n  const store = useStore()\r\n\r\n  const [state, setState] = useState(() =>\r\n  selectorFunc(store.getState() as State)\r\n)\r\n\r\n  const unsubscribe = useMemo(() => {\r\n    return store.subscribe(() => {\r\n      const newState = selectorFunc(store.getState() as State)\r\n      setState(prevState =>\r\n        shallowequal(prevState, newState) ? prevState : newState\r\n      );\r\n    });\r\n  }, [store, selectorFunc]);\r\n\r\n  useEffect(() => {\r\n    return () => unsubscribe();\r\n  }, [unsubscribe]);\r\n\r\n  return state as Selected\r\n}\r\n\r\n","import {memo, FC} from \"react\"\r\nimport {cn as bem} from \"@bem-react/classname\"\r\nimport {Link} from \"react-router-dom\"\r\nimport './style.css'\r\n\r\ninterface MenuItem {\r\n  key: number\r\n  link: string\r\n  title: string\r\n}\r\n\r\ninterface MenuProps {\r\n  items: MenuItem[]\r\n  onNavigate: (item: MenuItem) => void\r\n}\r\n\r\nconst Menu: FC<MenuProps> = ({ items = [], onNavigate}) => {\r\n  const cn = bem('Menu')\r\n  return (\r\n    <ul className={cn()}>\r\n      {items.map(item => (\r\n        <li key={item.key} className={cn('item')}>\r\n          <Link to={item.link} onClick={() => onNavigate(item)}>{item.title}</Link>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default memo(Menu)\r\n","/**\r\n * Форматирование разрядов числа\r\n * @param value {Number}\r\n * @param options {Object}\r\n * @returns {String}\r\n */\r\nexport default function numberFormat(value, locale = 'ru-RU', options = {}) {\r\n  return new Intl.NumberFormat(locale, options).format(value);\r\n}\r\n","import {memo} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport numberFormat from \"@src/utils/number-format\"\r\nimport './style.css'\r\n\r\ninterface IBasketToolProps {\r\n  sum?: number\r\n  amount?: number\r\n  onOpen: () => void\r\n  t: (text: string, number?: number) => string\r\n}\r\n\r\nconst BasketTool: React.FC<IBasketToolProps> = ({sum = 0, amount = 0, onOpen, t}) => {\r\n  const cn = bem('BasketTool');\r\n  return (\r\n    <div className={cn()}>\r\n      <span className={cn('label')}>{t('basket.inBasket')}</span>\r\n      <span className={cn('total')}>\r\n        {amount\r\n          ? `${amount} ${t('basket.articles', amount)} / ${numberFormat(sum)} ₽`\r\n          : t('basket.empty')\r\n        }\r\n      </span>\r\n      <button onClick={onOpen}>{t('basket.open')}</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(BasketTool)\r\n","import React, { FC, ReactNode, memo } from 'react'\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface SideLayoutProps {\r\n  children: ReactNode\r\n  side?: 'start' | 'end' | 'between'\r\n  padding?: 'small' | 'medium'\r\n  align?: 'start' | 'end'\r\n}\r\n\r\nconst SideLayout: FC<SideLayoutProps> = ({ children, side, padding, align }) => {\r\n  const cn = bem('SideLayout');\r\n  return (\r\n    <div className={cn({side, padding, align})}>\r\n      {React.Children.map(children, (child, index) => (\r\n        <div key={index} className={cn('item')}>{child}</div>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(SideLayout)\r\n","export default {\r\n  /**\r\n   * Открытие модалки по названию\r\n   * @param name\r\n   *  @param id\r\n   */\r\n  open: ({name, id}) => {\r\n    return {type: 'modal/open', payload: {name, id}};\r\n  },\r\n\r\n  // /**\r\n  //  * Закрытие модалки\r\n  //  * @param name\r\n  //  */\r\n  // close: (names) => {\r\n  //   return {type: 'modal/close', payload: {names}}\r\n  // },\r\n\r\n/**\r\n * Статус открытости всех модальных окон\r\n * @param status\r\n */\r\n  changeActiveModal: (status) => {\r\n    return {type: 'modal/active', payload: {status}}\r\n  },\r\n\r\n  /**\r\n   * Закрытие модалки\r\n   * @param name  \r\n   */\r\n  closeModal: (id) => (dispatch, getState, services) => {\r\n    const newModals = getState().modals.modals.filter((item) => item.id !== id)\r\n    console.log('getState().modals.modals', getState().modals.modals)\r\n    console.log('newModals', newModals)\r\n    dispatch({type: 'modal/close', payload: {modals: newModals}})\r\n    if(getState().modals.modals.length < 1) getState().modals.activeModal = false\r\n  },\r\n\r\n  /**\r\n * Статус открытости модального окна с каталогом товара\r\n * @param status\r\n */\r\n  changeStatusCatalogModal: (status) => {\r\n    return {type: 'modal/status/catalog', payload: {status}}\r\n  },\r\n}\r\n","export default function generateUniqueId() {\r\n  return '_' + Math.random().toString(36).slice(2, 11);\r\n}","import {memo, useCallback, useMemo} from \"react\";\r\nimport useStore from \"@src/hooks/use-store\";\r\nimport useSelector from \"@src/hooks/use-selector\";\r\nimport useTranslate from \"@src/hooks/use-translate\";\r\nimport Menu from \"@src/components/menu\";\r\nimport BasketTool from \"@src/components/basket-tool\";\r\nimport SideLayout from \"@src/components/side-layout\";\r\nimport {useDispatch} from 'react-redux';\r\nimport modalsActions from '@src/store-redux/modals/actions';\r\nimport codeGenerator from \"@src/utils/code-generator\";\r\nimport generateUniqueId from \"@src/utils/unicque_id\"\r\n\r\nfunction Navigation() {\r\n  const store = useStore();\r\n  const dispatch = useDispatch();\r\n\r\n  const select = useSelector(state => ({\r\n    amount: state.basket.amount,\r\n    sum: state.basket.sum,\r\n    lang: state.locale.lang\r\n  }));\r\n\r\n  const id = generateUniqueId()\r\n\r\n  const callbacks = {\r\n    // Открытие модалки корзины\r\n    openModalBasket: useCallback(() => {\r\n      //store.actions.modals.open('basket')\r\n      // dispatch(modalsActions.open('basket'))\r\n      dispatch(modalsActions.open({name: 'basket', id: id}))\r\n      dispatch(modalsActions.changeActiveModal(true))\r\n    }, [store]),\r\n\r\n    // Обработка перехода на главную\r\n    onNavigate: useCallback((item) => {\r\n      if (item.key === 1) store.actions.catalog.resetParams();\r\n    }, [store])\r\n  }\r\n\r\n  // Функция для локализации текстов\r\n  const {t} = useTranslate();\r\n\r\n  const options = {\r\n    menu: useMemo(() => ([\r\n      {key: 1, title: t('menu.main'), link: '/'},\r\n      {key: 2, title: t('menu.chat'), link: '/chat'},\r\n      {key: 3, title: t('menu.leaf'), link: '/leaf'},\r\n      {key: 4, title: t('menu.drawing'), link: '/drawing'},\r\n    ]), [t])\r\n  };\r\n\r\n  return (\r\n    <SideLayout side='between'>\r\n      <Menu items={options.menu} onNavigate={callbacks.onNavigate}/>\r\n      <BasketTool onOpen={callbacks.openModalBasket} amount={select.amount} sum={select.sum} t={t}/>\r\n    </SideLayout>\r\n  );\r\n}\r\n\r\nexport default memo(Navigation);\r\n","import {memo, FC} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface IPageLayoutProps {\r\n  head?: React.ReactNode\r\n  footer?: React.ReactNode\r\n  children: React.ReactNode\r\n}\r\n\r\nconst PageLayout: FC<IPageLayoutProps> = ({ head, footer, children }) =>{\r\n\r\n  const cn = bem('PageLayout')\r\n\r\n  return (\r\n    <div className={cn()}>\r\n      <div className={cn('head')}>\r\n        {head}\r\n      </div>\r\n      <div className={cn('center')}>\r\n        {children}\r\n      </div>\r\n      <div className={cn('footer')}>\r\n        {footer}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(PageLayout)","import {memo, ReactNode, FC} from \"react\"\r\nimport './style.css'\r\n\r\ninterface IHeadProps {\r\n  title: ReactNode\r\n  children: ReactNode\r\n}\r\n\r\nconst Head: FC<IHeadProps> = ({ title, children }) => {\r\n  return (\r\n    <div className='Head'>\r\n      <div className='Head-place'>\r\n        <h1 >{title}</h1>\r\n      </div>\r\n      <div className='Head-place'>{children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(Head)\r\n","import {memo, FC} from \"react\"\r\nimport './style.css'\r\n\r\ninterface IOption {\r\n  value: string | number\r\n  title: string\r\n}\r\n\r\ninterface ISelectProps {\r\n  options: IOption[]\r\n  value: any\r\n  onChange: (value: string | number) => void\r\n}\r\n\r\nconst Select: FC<ISelectProps> = ({ options, value, onChange }) => {\r\n\r\n  const onSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    onChange(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <select className=\"Select\" value={value} onChange={(e) => onSelect(e)}>\r\n      {options.map(item => (\r\n        <option key={item.value} value={item.value}>{item.title}</option>\r\n      ))}\r\n    </select>\r\n  )\r\n}\r\n\r\nexport default memo(Select)\r\n","import {memo, useCallback, useEffect, useState, FC} from 'react'\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport debounce from 'lodash.debounce'\r\nimport './style.css'\r\n\r\ninterface IInputProps {\r\n  value: string\r\n  name?: string\r\n  type?: string\r\n  placeholder?: string\r\n  onChange: (value: string, name?: string) => void\r\n  theme?: string\r\n  delay?: number\r\n}\r\n\r\nconst Input: FC<IInputProps> = (props) => {\r\n\r\n  // Внутренний стейт для быстрого отображения ввода\r\n  const [value, setValue] = useState(props.value)\r\n\r\n  const onChangeDebounce = useCallback(\r\n    debounce((value: string) => props.onChange(value, props.name), 600),\r\n    [props.onChange, props.name]\r\n  )\r\n\r\n  // Обработчик изменений в поле\r\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(event.target.value)\r\n    onChangeDebounce(event.target.value);\r\n  }\r\n\r\n  // Обновление стейта, если передан новый value\r\n  useEffect(() => setValue(props.value), [props.value])\r\n\r\n  const cn = bem('Input')\r\n  return (\r\n    <input\r\n      className={cn({theme: props.theme})}\r\n      value={value}\r\n      type={props.type}\r\n      placeholder={props.placeholder}\r\n      onChange={(event) => onChange(event)}\r\n    />\r\n  )\r\n}\r\n\r\nexport default memo(Input)\r\n","/**\r\n * Преобразование списка в иерархию.\r\n * @param tree {Array} Иерархия - список узлов со свойством children.\r\n * @param [callback] {Function} Для пользовательского преобразования элемента.\r\n * @param [level] {Number} Начальный уровень вложенности.\r\n * @param [result] {Array} Результат функции (используется рекурсией).\r\n * @returns {Array} Корневые узлы\r\n */\r\nexport default function treeToList(tree, callback, level = 0, result = []) {\r\n  for (const item of tree) {\r\n    result.push(callback ? callback(item, level) : item);\r\n    if (item.children?.length) treeToList(item.children, callback, level + 1, result);\r\n  }\r\n  return result;\r\n}\r\n","/**\r\n * Преобразование списка в иерархию\r\n * @param list {Array} Список объектов с отношением на родителя\r\n * @param [key] {String} Свойство с первичным ключом\r\n * @returns {Array} Корневые узлы\r\n */\r\nexport default function listToTree(list, key = '_id') {\r\n  let trees = {};\r\n  let roots = {};\r\n  for (const item of list) {\r\n\r\n    // Добавление элемента в индекс узлов и создание свойства children\r\n    if (!trees[item[key]]) {\r\n      trees[item[key]] = item;\r\n      trees[item[key]].children = [];\r\n      // Ещё никто не ссылался, поэтому пока считаем корнем\r\n      roots[item[key]] = trees[item[key]];\r\n    } else {\r\n      trees[item[key]] = Object.assign(trees[item[key]], item);\r\n    }\r\n\r\n    // Если элемент имеет родителя, то добавляем его в подчиненные родителя\r\n    if (item.parent?._id) {\r\n      // Если родителя ещё нет в индексе, то индекс создаётся, ведь _id родителя известен\r\n      if (!trees[item.parent._id]) trees[item.parent[key]] = { children: [] };\r\n      // Добавления в подчиненные родителя\r\n      trees[item.parent[key]].children.push(trees[item[key]]);\r\n      // Так как элемент добавлен к родителю, то он уже не является корневым\r\n      if (roots[item[key]]) delete roots[item[key]];\r\n    }\r\n  }\r\n  return Object.values(roots);\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABUSURBVHgB7Yy7DQAgCERJbBzDEdx/CUfREaTQjo+KjYaXXAN3D8D5n0DcMiZimjxd7kHB1DGQZHV0VWaZk2r/LemRjBubZJTULKOkZtkk3ZQ5r9MBwKgaTiegIRIAAAAASUVORK5CYII=\"","import React, { memo, FC, useRef, useEffect, useState } from \"react\"\r\nimport { cn as bem } from \"@bem-react/classname\"\r\nimport Img from \"../../assets/images/chevron_down.png\"\r\nimport \"./style.css\"\r\n\r\ninterface IСountry {\r\n  title: string\r\n  _id: string\r\n  code: string\r\n  selected?: boolean\r\n}\r\n\r\ninterface ISelectLayout {\r\n  options: IСountry[]\r\n  value: string\r\n  statusOpen: boolean\r\n  openOrCloseSelect: () => void\r\n  onCountry: (_id: string) => void\r\n  onSelected: (_id: string) => void\r\n  input: () => React.ReactNode\r\n  setValue: React.Dispatch<React.SetStateAction<string>>\r\n  setCode: React.Dispatch<React.SetStateAction<string>>\r\n  code: string\r\n  setSelectedIndex: React.Dispatch<React.SetStateAction<number | null>>\r\n  selectedIndex: number | null\r\n  ref: React.MutableRefObject<HTMLInputElement | null>,\r\n  selected: unknown\r\n  setCodes: React.Dispatch<React.SetStateAction<string[]>>\r\n  codes: string[]\r\n  onCodes: (code: string) => void\r\n  setValueInput: React.Dispatch<React.SetStateAction<string>>\r\n}\r\n\r\nconst SelectLayout: React.ForwardRefExoticComponent<Omit<ISelectLayout, \"ref\"> & React.RefAttributes<null>> = React.forwardRef((props, ref) => {\r\n  const cn = bem(\"Select-layout\")\r\n\r\n  const {options,\r\n    value,\r\n    statusOpen,\r\n    openOrCloseSelect,\r\n    onCountry,\r\n    setValue,\r\n    setCode,\r\n    input,\r\n    code,\r\n    setSelectedIndex,\r\n    onSelected,\r\n    selectedIndex,\r\n    selected,\r\n    setCodes,\r\n    codes,\r\n    onCodes,\r\n    setValueInput} = props\r\n\r\n  const handleClickOption = (\r\n    id: string,\r\n    title: string,\r\n    code: string,\r\n  ) => {\r\n    setValueInput('')\r\n    console.log('codes.length', codes.length)\r\n    if(codes.length > 0) {\r\n      setValue('Выбранные страны')\r\n    } else {\r\n      setValue(title)\r\n    }\r\n    setCode(code)\r\n    const selectedId = selected as React.MutableRefObject<string[]>\r\n    \r\n    if(!selectedId.current.includes(id)) {\r\n      selectedId.current = [...selectedId.current, id]\r\n    } else selectedId.current = selectedId.current.filter(item => item !== id)\r\n    onSelected(id)\r\n    onCountry(id)\r\n    \r\n    if(!codes.includes(code)) {\r\n      setCodes([...codes, code])\r\n    }else {\r\n      const filterCodes = codes.filter(item => item !== code)\r\n      setCodes(filterCodes)\r\n    }\r\n  };\r\n\r\n  const comparison = (index: number) => {\r\n    if (index === selectedIndex) {\r\n      return true;\r\n    } else return false;\r\n  }\r\n\r\n  const getSelected = (id: string) => {\r\n    const selectedId = selected as React.MutableRefObject<string[]>\r\n    const status = selectedId.current.includes(id)\r\n    return status\r\n  }\r\n\r\n  return (\r\n    <div className={cn()}>\r\n      {statusOpen ? (\r\n        <div className={cn(\"wrap-list\")}>\r\n          <div\r\n            className={cn(\"input\", { select: true })}\r\n            onClick={openOrCloseSelect}\r\n          >\r\n            <div className={cn(\"wrap-span\")}>\r\n              <span className={cn(\"code\", { select: true })}>{value === 'Выбранные страны' ? '' : code}</span>\r\n              <span className={cn(\"text\")}>{codes.length > 0 ? value + '...' : value}</span>\r\n            </div>\r\n            <img\r\n              className={cn(\"img\")}\r\n              src={Img}\r\n              style={statusOpen ? { transform: \"rotate(180deg)\" } : undefined}\r\n            />\r\n          </div>\r\n          <div className={cn(\"list-codes\")}>\r\n            {codes.length > 1 && codes.map((item) => (\r\n             <span className={cn(\"code-text\")} key={item} onClick={() => onCodes(item)}>{item}</span>\r\n            ))}\r\n          </div>\r\n          <div className={cn(\"wrap-input\")}>{input()}</div>\r\n          <div className={cn(\"wrap-ul\")}>\r\n            <ul className={cn(\"list\")} ref={ref}>\r\n              {options.map((item, index) => (\r\n                <li\r\n                  id={String(index)}\r\n                  className={cn(\"item\", { hover: (comparison(index) && !getSelected(item._id)), selected: getSelected(item._id)})}\r\n                  key={item._id}\r\n                  value={item.title}\r\n                  onClick={() =>\r\n                  handleClickOption(item._id, item.title, item.code)\r\n                  }\r\n                >\r\n                  <span className={cn(\"code\")}>{item.code}</span>\r\n                  <span className={cn(\"text\")}>{item.title}</span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className={cn(\"input\")} onClick={openOrCloseSelect}>\r\n          <div className={cn(\"wrap-span\")}>\r\n            <span className={cn(\"code\", { select: true })}>{value === 'Выбранные страны' ? '' : code}</span>\r\n            <span className={cn(\"text\")}>{codes.length > 0 ? value + '...' : value}</span>\r\n          </div>\r\n          <img className={cn(\"img\")} src={Img} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default memo(SelectLayout)\r\n","import { useRef, useState, useEffect } from \"react\";\r\nimport { IСountry } from \"../store/countries/types\";\r\nimport useStore from \"@src/hooks/use-store\"\r\n\r\nexport default function useSelectCustom(countries: IСountry[], isOpen: boolean) {\r\n\r\n  const store = useStore()\r\n  const [selectedIndex, setSelectedIndex] = useState<null | number>(null);\r\n  const selectorRef = useRef(null);\r\n  const selected = useRef<string[]>([]) as unknown\r\n\r\n  let index = 0;\r\n\r\n  const handleKeyDown = (e: KeyboardEvent) => {\r\n    // Стрелка вверх\r\n    if (e.key === \"ArrowUp\" && index > 0) {\r\n      --index;\r\n      setSelectedIndex(index);\r\n      scrollSelectedItem(\"up\");\r\n    }\r\n\r\n    // Стрелка вниз\r\n    if (e.key === \"ArrowDown\" && index !== countries.length - 1) {\r\n      ++index;\r\n      setSelectedIndex(index);\r\n\r\n      if(index > 3) scrollSelectedItem(\"down\")\r\n    }\r\n\r\n    // Enter\r\n    if (e.key === \"Enter\") {\r\n      let list = selectorRef.current as any\r\n\r\n      if (list !== null) {\r\n        const id = countries[index]._id\r\n        // selectedItem.style.backgroundColor = \"#808DFF\";\r\n        const selectedId = selected as React.MutableRefObject<string[]>\r\n        const selectedElement = document.getElementById(String(index))\r\n        \r\n        if(!selectedId.current.includes(id)) {\r\n          selectedId.current = [...selectedId.current, id]\r\n          if(selectedElement)  {\r\n            selectedElement.style.backgroundColor = \"#808DFF\"\r\n            selectedElement.style.borderBottom = \"1px solid #eaeaec\"\r\n          }\r\n        } else {\r\n          selectedId.current = selectedId.current.filter(item => item !== id)\r\n          if(selectedElement)  {\r\n            selectedElement.style.backgroundColor = \"#FFFFFF\"\r\n            selectedElement.style.borderBottom = \"1px solid #FFFFFF\"\r\n          }\r\n        }\r\n         \r\n        const params = selectedId.current.join('|')\r\n        store.actions.catalog.setParams({ madeIn: params, page: 1 }, false, false)\r\n      }\r\n    }\r\n  };\r\n  const scrollSelectedItem = (direction: string) => {\r\n    const list = selectorRef.current as any;\r\n    const padding = 5;\r\n\r\n    if (list !== null) {\r\n      const selectedItem = list.querySelector(\".Select-layout-item\");\r\n      if (!selectedItem) {\r\n        return;\r\n      }\r\n      const selectorRect = list.getBoundingClientRect(); // границы списка\r\n      const selectedItemRect = selectedItem.getBoundingClientRect(); // границы выделенной страны\r\n\r\n      if (direction === \"up\" && selectedItemRect.top < selectorRect.top + 10) {\r\n        list.scrollTop -= selectedItemRect.height;\r\n      }\r\n\r\n      if (direction === \"down\") {\r\n        if (selectedItemRect.top === selectorRect.top + padding) {\r\n          list.scrollTop += selectedItemRect.height;\r\n          // selectedItem.style.backgroundColor = 'rgba(219, 223, 255, 1)'\r\n        } else {\r\n          if (index !== countries.length - 1) {\r\n            list.scrollTop += selectedItemRect.height;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    setSelectedIndex(null) \r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isOpen && countries.length > 0) {\r\n      document.addEventListener(\"keydown\", handleKeyDown);\r\n    }\r\n    const countriesCurrent = selectorRef.current as unknown\r\n    const countriesRef = countriesCurrent as HTMLElement\r\n    countriesRef && countriesRef.addEventListener('mouseenter', handleMouseEnter)\r\n\r\n  }, [isOpen]);\r\n\r\n  return { selectedIndex, selectorRef, setSelectedIndex, handleKeyDown, handleMouseEnter };\r\n}\r\n","import { memo, useCallback, useState, useRef } from \"react\"\r\nimport { StoreState } from \"@src/store/types\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport SelectLayout from \"@src/components/select-layout\"\r\nimport Input from \"@src/components/input\"\r\nimport useSelectCustom from \"@src/hooks/use-select-custom\"\r\n\r\nfunction SelectCustom() {\r\n  const store = useStore()\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [value, setValue] = useState(\"Все\")\r\n  const [valueInput, setValueInput] = useState(\"\")\r\n  const [code, setCode] = useState(\"  \")\r\n  const [codes, setCodes] = useState<string[]>([])\r\n  const selected = useRef<string[]>([]) as unknown\r\n\r\n  const select = useSelector((state: StoreState) => ({\r\n    countries: state.countries.list,\r\n    waiting: state.countries.waiting,\r\n  }))\r\n\r\n  const { selectedIndex, selectorRef, setSelectedIndex, handleKeyDown, handleMouseEnter } = useSelectCustom(\r\n    select.countries,\r\n    isOpen,\r\n  )\r\n\r\n  const callbacks = {\r\n    // Поиск\r\n    onSearch: useCallback(\r\n      (query: string) => {\r\n        setValueInput(query)\r\n        setCodes([])\r\n        const selectedId = selected as React.MutableRefObject<string[]>\r\n        selectedId.current = []\r\n        if(query === 'все') {\r\n          store.actions.countries.load()\r\n        } else store.actions.countries.search(query)\r\n      },\r\n      [store]\r\n    ),\r\n    // Фильтр по странам\r\n    onCountry: useCallback(\r\n      (_id: string) => {\r\n        const selectedId = selected as React.MutableRefObject<string[]>\r\n         const params = selectedId.current.join('|')\r\n        store.actions.catalog.setParams({ madeIn: params, page: 1 }, false, false)\r\n      },\r\n      [store]\r\n    ),\r\n    // Выбор страны\r\n    onSelected: useCallback((id: string) => store.actions.countries.selectСountry(id), [store]),\r\n    // Перемещение скролла \r\n    onCodes: useCallback((code: string) =>{\r\n      if(selectorRef.current) {\r\n        const countriesCurrent = selectorRef.current as unknown\r\n        const countriesRef = countriesCurrent as HTMLElement\r\n        const liElements = countriesRef.querySelectorAll('.Select-layout-code');\r\n        liElements.forEach(li => {\r\n          if (li.textContent === code) {\r\n            li.scrollIntoView({ behavior: 'smooth', block: \"center\" });\r\n          }\r\n        })\r\n      }\r\n    }, [codes]),\r\n    // Во время открытия и закрытия списка стран\r\n    onSelect: useCallback(() => {\r\n      setIsOpen(!isOpen);\r\n      if (isOpen) {\r\n        // store.actions.countries.load()\r\n        document.body.style.overflow = \"visible\";\r\n      };\r\n      if (!isOpen) {\r\n        document.body.style.overflow = \"hidden\";\r\n        document.removeEventListener(\"keydown\", handleKeyDown)\r\n        const countriesCurrent = selectorRef.current as unknown\r\n        const countriesRef = countriesCurrent as HTMLElement\r\n        countriesRef && countriesRef.removeEventListener('mouseenter', handleMouseEnter)\r\n      }\r\n    }, [isOpen]),\r\n  }\r\n\r\n  const renders = {\r\n    input: useCallback(\r\n      () => (\r\n        <Input\r\n          value={valueInput}\r\n          onChange={callbacks.onSearch}\r\n          placeholder=\"Поиск\"\r\n          theme=\"transparent\"\r\n        />\r\n      ),\r\n      [store, setValueInput, valueInput]\r\n    ),\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SelectLayout\r\n        openOrCloseSelect={callbacks.onSelect}\r\n        onSelected={callbacks.onSelected}\r\n        onCountry={callbacks.onCountry}\r\n        value={value}\r\n        options={select.countries}\r\n        statusOpen={isOpen}\r\n        input={renders.input}\r\n        code={code}\r\n        setValue={setValue}\r\n        setValueInput={setValueInput}\r\n        setCode={setCode}\r\n        codes={codes} \r\n        setCodes={setCodes}\r\n        setSelectedIndex={setSelectedIndex}\r\n        selectedIndex={selectedIndex}\r\n        ref={selectorRef}\r\n        selected={selected}\r\n        onCodes={callbacks.onCodes}\r\n      ></SelectLayout>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default memo(SelectCustom)\r\n","import {memo, FC} from 'react'\r\nimport {cn as bem} from '@bem-react/classname'\r\n\r\nimport './style.css'\r\n\r\ninterface IButtonProps {\r\n  value: string\r\n  onClick?: () => void\r\n  closeStyle?: boolean\r\n}\r\nconst Button: FC<IButtonProps> = ({ value, onClick = () => {}, closeStyle = false }) =>{\r\n  const cn = bem('Button')\r\n  return (\r\n    <button className={cn({ close: closeStyle })} onClick={onClick}>{value}</button>\r\n  )\r\n}\r\n\r\nexport default memo(Button)\r\n","import React, { useCallback, useMemo } from 'react'\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport SideLayout from \"@src/components/side-layout\"\r\nimport Select from \"@src/components/select\"\r\nimport Input from \"@src/components/input\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport treeToList from \"@src/utils/tree-to-list\"\r\nimport listToTree from \"@src/utils/list-to-tree\"\r\nimport SelectCustom from \"@src/containers/select-custom\"\r\nimport Button from \"@src/components/button\"\r\n\r\nconst CatalogFilterContent = ({ sort, query, category, onSort, onSearch, onReset, onCategory, options, t }) => {\r\n    return (\r\n        <SideLayout padding='medium' align='start'>\r\n          <SelectCustom/>\r\n          <Select options={options.categories} value={category} onChange={onCategory}/>\r\n          <Select options={options.sort} value={sort} onChange={onSort}/>\r\n          <Input value={query} onChange={onSearch} placeholder={'Поиск'} delay={1000}/>\r\n          <Button value={t('filter.reset')} closeStyle={true} onClick={onReset}/>\r\n        </SideLayout>\r\n    );\r\n  };\r\n\r\n function withCatalogFilter(WrappedComponent, params) {\r\n    const { stateSelector, actionSetParams, actionResetParams, hideParams } = params;\r\n\r\n  return function CatalogFilterHOC() {\r\n    const store = useStore();\r\n\r\n    const select = useSelector(stateSelector);\r\n\r\n    const callbacks = {\r\n      onSort: useCallback(sort => store.actions[actionSetParams].setParams({ sort }, false, hideParams), [store, actionSetParams]),\r\n      onSearch: useCallback(query => store.actions[actionSetParams].setParams({ query, page: 1 }, false, hideParams), [store, actionSetParams]),\r\n      onReset: useCallback(() => store.actions[actionResetParams].resetParams(), [store, actionResetParams]),\r\n      onCategory: useCallback(category => store.actions[actionSetParams].setParams({ category, page: 1 }, false, hideParams), [store, actionSetParams]),\r\n    }\r\n\r\n    const options = useMemo(() => ({\r\n      sort: [\r\n        { value: 'order', title: 'По порядку' },\r\n        { value: 'title.ru', title: 'По именованию' },\r\n        { value: '-price', title: 'Сначала дорогие' },\r\n        { value: 'edition', title: 'Древние' },\r\n      ],\r\n      categories: [\r\n        { value: '', title: 'Все' },\r\n        ...treeToList(listToTree(select.categories), (item, level) => (\r\n          { value: item._id, title: '- '.repeat(level) + item.title }\r\n        ))\r\n      ]\r\n    }), [select.categories]);\r\n\r\n    const { t } = useTranslate();\r\n\r\n    return (\r\n       <WrappedComponent {...select} {...callbacks} options={options} t={t} />\r\n    );\r\n  };\r\n}\r\n\r\nconst CatalogFilter = withCatalogFilter(CatalogFilterContent, {\r\n  stateSelector: state => ({\r\n    sort: state.catalog.params.sort,\r\n    query: state.catalog.params.query,\r\n    category: state.catalog.params.category,\r\n    categories: state.categories.list,\r\n  }),\r\n  actionSetParams: 'catalog',\r\n  actionResetParams: 'catalog',\r\n  hideParams: false\r\n});\r\n\r\nconst CatalogFilterForModal = withCatalogFilter(CatalogFilterContent, {\r\n  stateSelector: state => ({\r\n    sort: state.catalog_modal.params.sort,\r\n    query: state.catalog_modal.params.query,\r\n    category: state.catalog_modal.params.category,\r\n    categories: state.categories.list,\r\n  }),\r\n  actionSetParams: 'catalog_modal',\r\n  actionResetParams: 'catalog_modal',\r\n  hideParams: true\r\n});\r\n\r\n export { CatalogFilter, CatalogFilterForModal };\r\n","import {memo, FC} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport numberFormat from \"@src/utils/number-format\"\r\nimport './style.css'\r\nimport {Link} from \"react-router-dom\"\r\n\r\ninterface IItemProps {\r\n  item: {\r\n    _id: string | number\r\n    title: string\r\n    price: number\r\n    selectedGoods: boolean\r\n  };\r\n  link?: string\r\n  onOpenModal: (id: string | number) => void\r\n  labelCurr?: string\r\n  labelAdd?: string\r\n  hideLink?: boolean\r\n  handleClickButton: (id: string | number) => void\r\n  disabled?: boolean\r\n}\r\n\r\nconst Item: FC<IItemProps> = ({\r\n  item,\r\n  link,\r\n  onOpenModal,\r\n  labelCurr = '₽',\r\n  labelAdd = 'Добавить',\r\n  hideLink = true,\r\n  handleClickButton,\r\n  disabled = false,\r\n}) => {\r\n\r\n  const cn = bem('Item')\r\n\r\n  const callbacks = {\r\n    onOpenModal: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n      event.stopPropagation()\r\n      onOpenModal(item._id)\r\n    },\r\n    handleClick: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n      event.stopPropagation()\r\n      handleClickButton(item._id)\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div className={cn({ selected: item.selectedGoods })} onClick={(event) => callbacks.handleClick(event)}>\r\n      {/*<div className={cn('code')}>{props.item._id}</div>*/}\r\n      <div className={cn('title')}>\r\n        {hideLink ? (\r\n          <Link to={link || ''}>{item.title}</Link>\r\n        ) : (\r\n          <span>{item.title}</span>\r\n        )}\r\n      </div>\r\n      <div className={cn('actions')}>\r\n        <div className={cn('price')}>{numberFormat(item.price)} {labelCurr}</div>\r\n        <button onClick={(event) => callbacks.onOpenModal(event)} disabled={disabled}>{labelAdd}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(Item)\r\n","import {memo, FC} from \"react\"\r\nimport './style.css'\r\n\r\ninterface IListProps {\r\n  list: {\r\n    _id: string | number\r\n  }[];\r\n  renderItem: (item: { _id: string | number }) => React.ReactNode\r\n}\r\n\r\nconst List: FC<IListProps> = ({ list, renderItem }) => {\r\n  return (\r\n    <div className='List'>{\r\n      list.map(item =>\r\n        <div key={item._id} className='List-item'>\r\n          {renderItem(item)}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(List)\r\n","import {memo, FC} from 'react'\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface IPaginationProps {\r\n  page: number\r\n  limit: number\r\n  count: number\r\n  indent: number\r\n  onChange?: (pageNumber: number | null) => void\r\n  makeLink: (pageNumber: number) => string\r\n}\r\n\r\nconst Pagination: FC<IPaginationProps> = ({\r\n  page = 1,\r\n  limit = 10,\r\n  count = 1000,\r\n  indent = 1,\r\n  onChange,\r\n  makeLink,\r\n}) => {\r\n\r\n  // Количество страниц\r\n  const length = Math.ceil(count / Math.max(limit, 1));\r\n\r\n  // Номера слева и справа относительно активного номера, которые остаются видимыми\r\n  let left = Math.max(page - indent, 1);\r\n  let right = Math.min(left + indent * 2, length);\r\n  // Корректировка когда страница в конце\r\n  left = Math.max(right - indent * 2, 1);\r\n\r\n  // Массив номеров, чтобы удобней рендерить\r\n  let items = [];\r\n  // Первая страница всегда нужна\r\n  if (left > 1) items.push(1);\r\n  // Пропуск\r\n  if (left > 2) items.push(null);\r\n  // Последовательность страниц\r\n  for (let page = left; page <= right; page++) items.push(page);\r\n  // Пропуск\r\n  if (right < length - 1) items.push(null);\r\n  // Последняя страница\r\n  if (right < length) items.push(length);\r\n\r\n  const onClickHandler = (number: number | null, e: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\r\n       if (onChange) {\r\n         e.preventDefault();\r\n        onChange(number);\r\n       }\r\n\r\n  }\r\n\r\n  const cn = bem('Pagination')\r\n  return (\r\n    <ul className={cn()}>\r\n      {items.map((number, index) => (\r\n        <li key={index}\r\n            className={cn('item', {active: number === page, split: !number})}\r\n            onClick={(e) => onClickHandler(number, e)}>\r\n          {number\r\n            ? (makeLink\r\n                ? <a href={makeLink(number)}>{number}</a>\r\n                : number\r\n            )\r\n            : '...'\r\n          }\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  )\r\n\r\n}\r\n\r\nexport default memo(Pagination)\r\n","import {memo, FC} from \"react\"\r\nimport './style.css'\r\n\r\ninterface ISpinnerProps {\r\n  active: boolean;\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Spinner: FC<ISpinnerProps> = ({ active, children }) => {\r\n  if (active) {\r\n    return <div className=\"Spinner\">{children}</div>\r\n  } else {\r\n    return children;\r\n  }\r\n}\r\n\r\nexport default memo(Spinner)\r\n","import {memo, useCallback, useEffect, useState, useRef} from \"react\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport Item from \"@src/components/item\"\r\nimport List from \"@src/components/list\"\r\nimport Pagination from \"@src/components/pagination\"\r\nimport Spinner from \"@src/components/spinner\"\r\nimport modalsActions from '@src/store-redux/modals/actions'\r\nimport generateUniqueId from \"@src/utils/unicque_id\"\r\nimport { useDispatch } from \"react-redux\"\r\n\r\nfunction CatalogList({stateName, goods}) {\r\n  const store = useStore();\r\n  const dispatch = useDispatch();\r\n  const selectRef = useRef();\r\n  const [chosenProductId, setChosenProductId] = useState(null)\r\n\r\n  const select = useSelector((state) => ({\r\n    list: state[stateName].list,\r\n    page: state[stateName].params.page,\r\n    limit: state[stateName].params.limit,\r\n    count: state[stateName].count,\r\n    waiting: state[stateName].waiting,\r\n    quantity: state.basket.quantity,\r\n    selected: state.basket.selected\r\n  }));\r\n\r\n  const idModal = generateUniqueId()\r\n\r\n  const callbacks = {\r\n    // Открытие модалки\r\n    openModal: useCallback((id) => {\r\n      // dispatch(modalsActions.open('quantity'))\r\n      dispatch(modalsActions.open({name: 'quantity', id: idModal}))\r\n      dispatch(modalsActions.changeActiveModal(true))\r\n      setChosenProductId(id)\r\n    }, [store]),\r\n    // Добавление в корзину\r\n    addToBasket: useCallback((_id, quantity) => {\r\n      store.actions.basket.addToBasket(_id, quantity)\r\n    }, [store]),\r\n    // Пагинация\r\n    onPaginate: useCallback(page => store.actions[stateName].setParams({page}, false, false, selectRef.current), [store]),\r\n    // генератор ссылки для пагинатора\r\n    makePaginatorLink: useCallback((page) => {\r\n      return `?${new URLSearchParams({page, limit: select.limit, sort: select.sort, query: select.query})}`;\r\n    }, [select.limit, select.sort, select.query]),\r\n    // Выделения продукта\r\n    changeSelected: useCallback((id) => {\r\n\r\n      const status = selectRef.current.some(item => item.id === id)\r\n\r\n      if(status) {\r\n        store.actions.basket.removeFromSelected(id)\r\n        store.actions.catalog_modal.selectItem(id)\r\n      } else {\r\n        store.actions.basket.updateQuantityProduct(1)\r\n        store.actions.basket.updateSelected(id)\r\n        store.actions.catalog_modal.selectItem(id)\r\n      }\r\n      \r\n    }, [select.selected])\r\n  }\r\n\r\n  const {t} = useTranslate()\r\n\r\n  useEffect(() => {\r\n    if(select.quantity && chosenProductId) callbacks.addToBasket(chosenProductId, select.quantity)\r\n  }, [select.quantity])\r\n\r\n  useEffect(() => {\r\n    if(stateName === 'catalog_modal') selectRef.current = select.selected\r\n  }, [select.selected])\r\n\r\n  const renders = {\r\n    item: useCallback(item => (\r\n      <Item \r\n        item={item} \r\n        onOpenModal={callbacks.openModal} \r\n        link={`/articles/${item._id}`} \r\n        labelAdd={t('article.add')}\r\n        disabled={stateName === 'catalog_modal' ? 'disabled' : ''}\r\n        handleClickButton={stateName === 'catalog_modal' ? callbacks.changeSelected : () => {}}\r\n        hideLink={stateName === 'catalog_modal' ? false : true}\r\n        />\r\n    ), [callbacks.openModal, t, callbacks.changeSelected]),\r\n  };\r\n  console.log('goods', goods)\r\n  console.log('select.list', select.list)\r\n  return (\r\n    <Spinner active={select.waiting}>\r\n      <List list={select.list} renderItem={renders.item}/>\r\n      <Pagination count={select.count} page={select.page} limit={select.limit}\r\n                  onChange={callbacks.onPaginate} makeLink={callbacks.makePaginatorLink}/>\r\n    </Spinner>\r\n  );\r\n}\r\n\r\nexport default memo(CatalogList);\r\n","import {memo, useCallback, useMemo} from \"react\";\r\nimport useStore from \"@src/hooks/use-store\";\r\nimport useSelector from \"@src/hooks/use-selector\";\r\nimport useTranslate from \"@src/hooks/use-translate\";\r\nimport Select from \"@src/components/select\";\r\n\r\nfunction LocaleSelect() {\r\n\r\n  const {lang, setLang} = useTranslate();\r\n\r\n  const options = {\r\n    lang: useMemo(() => ([\r\n      {value: 'ru', title: 'Русский'},\r\n      {value: 'en', title: 'English'},\r\n    ]), [])\r\n  };\r\n\r\n  return (\r\n    <Select onChange={setLang} value={lang} options={options.lang}/>\r\n  );\r\n}\r\n\r\nexport default memo(LocaleSelect);\r\n","import {memo, useCallback} from \"react\";\r\nimport SideLayout from \"@src/components/side-layout\";\r\nimport {Link, useLocation, useNavigate} from \"react-router-dom\";\r\nimport useTranslate from \"@src/hooks/use-translate\";\r\nimport useSelector from \"@src/hooks/use-selector\";\r\nimport useStore from \"@src/hooks/use-store\";\r\n\r\nfunction TopHead() {\r\n\r\n  const {t} = useTranslate();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const store = useStore();\r\n\r\n  const select = useSelector(state => ({\r\n    user: state.session.user,\r\n    exists: state.session.exists\r\n  }));\r\n\r\n  const callbacks = {\r\n    // Переход к авторизации\r\n    onSignIn: useCallback(() => {\r\n      navigate('/login', {state: {back: location.pathname}});\r\n    }, [location.pathname]),\r\n\r\n    // Отмена авторизации\r\n    onSignOut: useCallback(() => {\r\n      store.actions.session.signOut();\r\n    }, []),\r\n  }\r\n\r\n  return (\r\n    <SideLayout side=\"end\" padding=\"small\">\r\n      {select.exists ? <Link to=\"/profile\">{select.user.profile.name}</Link> : ''}\r\n      {select.exists\r\n        ? <button onClick={callbacks.onSignOut}>{t('session.signOut')}</button>\r\n        : <button onClick={callbacks.onSignIn}>{t('session.signIn')}</button>\r\n      }\r\n    </SideLayout>\r\n  );\r\n}\r\n\r\n\r\nexport default memo(TopHead);\r\n","import {memo} from 'react'\r\nimport useStore from \"@src/hooks/use-store\" \r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport useInit from \"@src/hooks/use-init\"\r\nimport Navigation from \"@src/containers/navigation\"\r\nimport PageLayout from \"@src/components/page-layout\"\r\nimport Head from \"@src/components/head\"\r\n// import CatalogFilter from \"@src/containers/catalog-filter\"\r\nimport { CatalogFilter } from '@src/containers/hoc/with-catalog-filter'\r\nimport CatalogList from \"@src/containers/catalog-list\"\r\nimport LocaleSelect from \"@src/containers/locale-select\"\r\nimport TopHead from \"@src/containers/top-head\"\r\n\r\nfunction Main({goods}: {goods: any}) {\r\n\r\n  const store = useStore();\r\n\r\n  useInit(async () => {\r\n    await Promise.all([\r\n      store.actions.catalog.initParams(),\r\n      store.actions.categories.load(),\r\n      store.actions.countries.load()\r\n    ]);\r\n  }, [], true);\r\n\r\n  const {t} = useTranslate()\r\n\r\n  return (\r\n    <PageLayout>\r\n      <TopHead/>\r\n      <Head title={t('title')}>\r\n        <LocaleSelect/>\r\n      </Head>\r\n      <Navigation/>\r\n      <CatalogFilter/>\r\n      <CatalogList stateName='catalog' goods={goods}/>\r\n    </PageLayout>\r\n  );\r\n}\r\n\r\nexport default memo(Main)\r\n","import {memo} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport numberFormat from \"@src/utils/number-format\"\r\nimport './style.css'\r\n\r\ninterface IArticleCardProps {\r\n  article: {\r\n    _id: string,\r\n    description: string,\r\n    madeIn: {\r\n      title: string,\r\n      code: string\r\n    } | null,\r\n    category: {\r\n      title: string\r\n    } | null,\r\n    edition: string | number,\r\n    price: number\r\n  }\r\n  onAdd: (id: string) => void\r\n  t: any\r\n}\r\n\r\nconst ArticleCard: React.FC<IArticleCardProps> = ({article, onAdd, t}) => {\r\n  const cn = bem('ArticleCard')\r\n  return (\r\n    <div className={cn()}>\r\n      <div className={cn('description')}>{article.description}</div>\r\n      <div className={cn('prop')}>\r\n        <div className={cn('label')}>Страна производитель:</div>\r\n        <div className={cn('value')}>{article.madeIn?.title} ({article.madeIn?.code})</div>\r\n      </div>\r\n      <div className={cn('prop')}>\r\n        <div className={cn('label')}>Категория:</div>\r\n        <div className={cn('value')}>{article.category?.title}</div>\r\n      </div>\r\n      <div className={cn('prop')}>\r\n        <div className={cn('label')}>Год выпуска:</div>\r\n        <div className={cn('value')}>{article.edition}</div>\r\n      </div>\r\n      <div className={cn('prop', {size: 'big'})}>\r\n        <div className={cn('label')}>Цена:</div>\r\n        <div className={cn('value')}>{numberFormat(article.price)} ₽</div>\r\n      </div>\r\n      <button onClick={() => onAdd(article._id)}>{t('article.add')}</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(ArticleCard)\r\n","export default {\r\n  /**\r\n   * Загрузка товара\r\n   * @param id\r\n   * @return {Function}\r\n   */\r\n  load: (id) => {\r\n    return async (dispatch, getState, services) => {\r\n      // Сброс текущего товара и установка признака ожидания загрузки\r\n      dispatch({type: 'article/load-start'});\r\n\r\n      try {\r\n        const res = await services.api.request({\r\n          url: `/api/v1/articles/${id}?fields=*,madeIn(title,code),category(title)`\r\n        });\r\n        // Товар загружен успешно\r\n        dispatch({type: 'article/load-success', payload: {data: res.data.result}});\r\n\r\n      } catch (e) {\r\n        //Ошибка загрузки\r\n        dispatch({type: 'article/load-error'});\r\n      }\r\n    }\r\n  },\r\n}\r\n","import {memo, useCallback, useMemo} from 'react'\r\nimport {useParams} from \"react-router-dom\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport useInit from \"@src/hooks/use-init\"\r\nimport PageLayout from \"@src/components/page-layout\"\r\nimport Head from \"@src/components/head\"\r\nimport Navigation from \"@src/containers/navigation\"\r\nimport Spinner from \"@src/components/spinner\"\r\nimport ArticleCard from \"@src/components/article-card\"\r\nimport LocaleSelect from \"@src/containers/locale-select\"\r\nimport TopHead from \"@src/containers/top-head\"\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport shallowequal from \"shallowequal\"\r\nimport articleActions from '@src/store-redux/article/actions'\r\n\r\nfunction Article() {\r\n  const store = useStore()\r\n\r\n  const dispatch = useDispatch()\r\n  // Параметры из пути /articles/:id\r\n\r\n  const params = useParams() \r\n\r\n  useInit(() => {\r\n    dispatch(articleActions.load(params.id))\r\n  }, [params.id as never])\r\n\r\n  const select = useSelector((state: any) => ({\r\n    article: state.article.data,\r\n    waiting: state.article.waiting,\r\n  }), shallowequal); // Нужно указать функцию для сравнения свойства объекта, так как хуком вернули объект\r\n\r\n  const {t} = useTranslate()\r\n\r\n  const callbacks = {\r\n    // Добавление в корзину\r\n    addToBasket: useCallback((_id: string )=> store.actions.basket.addToBasket(_id), [store]),\r\n  }\r\n\r\n  return (\r\n    <PageLayout>\r\n      <TopHead/>\r\n      <Head title={select.article.title}>\r\n        <LocaleSelect/>\r\n      </Head>\r\n      <Navigation/>\r\n      <Spinner active={select.waiting}>\r\n        <ArticleCard article={select.article} onAdd={callbacks.addToBasket} t={t}/>\r\n      </Spinner>\r\n    </PageLayout>\r\n  );\r\n}\r\n\r\nexport default memo(Article);\r\n","import {memo, ReactNode, FC} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface IFieldProps {\r\n  label?: ReactNode\r\n  error?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nconst Field: FC<IFieldProps> = ({ label, error, children }) =>{\r\n  const cn = bem('Field')\r\n  return (\r\n    <div className={cn()}>\r\n      <label className={cn('label')}>{label}</label>\r\n      <div className={cn('input')}>\r\n        {children}\r\n      </div>\r\n      <div className={cn('error')}>\r\n        {error}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(Field)\r\n","import {memo, useCallback, useState} from \"react\"\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport Head from \"@src/components/head\"\r\nimport LocaleSelect from \"@src/containers/locale-select\"\r\nimport Navigation from \"@src/containers/navigation\"\r\nimport PageLayout from \"@src/components/page-layout\"\r\nimport Input from \"@src/components/input\"\r\nimport Field from \"@src/components/field\"\r\nimport SideLayout from \"@src/components/side-layout\"\r\nimport TopHead from \"@src/containers/top-head\"\r\nimport {useLocation, useNavigate} from \"react-router-dom\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport useInit from \"@src/hooks/use-init\"\r\nimport { StoreState } from \"@src/store/types\"\r\n\r\n\r\nfunction Login() {\r\n\r\n  const {t} = useTranslate()\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n  const store = useStore()\r\n\r\n  useInit(() => {\r\n    store.actions.session.resetErrors()\r\n  })\r\n\r\n  const select = useSelector((state: StoreState) => ({\r\n    waiting: state.session.waiting,\r\n    errors: state.session.errors as any\r\n  }))\r\n\r\n  const [data, setData] = useState({\r\n    login: '',\r\n    password: ''\r\n  })\r\n\r\n  const callbacks = {\r\n    // Колбэк на ввод в элементах формы\r\n    onChange: useCallback((value: string, name: string | undefined) => {\r\n      // @ts-ignore\r\n      setData(prevData => ({...prevData, [name]: value}))\r\n    }, []),\r\n\r\n    // Отправка данных формы для авторизации\r\n    onSubmit: useCallback((e: React.FormEvent<HTMLFormElement>) => {\r\n      e.preventDefault()\r\n      store.actions.session.signIn(data, () => {\r\n        // Возврат на страницу, с которой пришли\r\n        const back = location.state?.back && location.state?.back !== location.pathname\r\n          ? location.state?.back\r\n          : '/'\r\n        navigate(back)\r\n      })\r\n\r\n    }, [data, location.state])\r\n  }\r\n\r\n  return (\r\n    <PageLayout>\r\n      <TopHead/>\r\n      <Head title={t('title')}>\r\n        <LocaleSelect/>\r\n      </Head>\r\n      <Navigation/>\r\n      <SideLayout padding='medium'>\r\n        <form onSubmit={callbacks.onSubmit}>\r\n          <h2>{t('auth.title')}</h2>\r\n          <Field label={t('auth.login')} error={select.errors?.login}>\r\n            <Input name=\"login\" value={data.login} onChange={callbacks.onChange}/>\r\n          </Field>\r\n          <Field label={t('auth.password')} error={select.errors?.password}>\r\n            <Input name=\"password\" type=\"password\" value={data.password}\r\n                   onChange={callbacks.onChange}/>\r\n          </Field>\r\n          <Field error={select.errors?.other}/>\r\n          <Field>\r\n            <button type=\"submit\">{t('auth.signIn')}</button>\r\n          </Field>\r\n        </form>\r\n      </SideLayout>\r\n    </PageLayout>\r\n  )\r\n}\r\n\r\nexport default memo(Login)\r\n","import {memo, FC} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface IProfileCardProps {\r\n  data: {\r\n    profile: {\r\n      name: string\r\n      phone: string\r\n    }\r\n    email?: string\r\n  }\r\n}\r\n\r\nconst ProfileCard: FC<IProfileCardProps> = ({ data }) => {\r\n  const cn = bem('ProfileCard')\r\n\r\n  return (\r\n    <div className={cn()}>\r\n      <h3 className={cn('title')}>Профиль</h3>\r\n      <div className={cn('prop')}>\r\n        <div className={cn('label')}>Имя:</div>\r\n        <div className={cn('value')}>{data?.profile?.name}</div>\r\n      </div>\r\n      <div className={cn('prop')}>\r\n        <div className={cn('label')}>Телефон:</div>\r\n        <div className={cn('value')}>{data?.profile?.phone}</div>\r\n      </div>\r\n      <div className={cn('prop')}>\r\n        <div className={cn('label')}>email:</div>\r\n        <div className={cn('value')}>{data?.email}</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(ProfileCard)\r\n","import {memo, useCallback, useMemo} from 'react'\r\nimport {useParams} from \"react-router-dom\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport useInit from \"@src/hooks/use-init\"\r\nimport PageLayout from \"@src/components/page-layout\"\r\nimport Head from \"@src/components/head\"\r\nimport Navigation from \"@src/containers/navigation\"\r\nimport Spinner from \"@src/components/spinner\"\r\nimport ArticleCard from \"@src/components/article-card\"\r\nimport LocaleSelect from \"@src/containers/locale-select\"\r\nimport TopHead from \"@src/containers/top-head\"\r\nimport ProfileCard from \"@src/components/profile-card\"\r\nimport { StoreState } from '@src/store/types'\r\n\r\nfunction Profile() {\r\n  const store = useStore()\r\n\r\n  useInit(() => {\r\n    store.actions.profile.load()\r\n  }, [])\r\n\r\n  const select = useSelector((state: StoreState) => ({\r\n    profile: state.profile.data as {profile: {\r\n        name: string\r\n        phone: string\r\n      }},\r\n    waiting: state.profile.waiting,\r\n  }))\r\n\r\n  const {t} = useTranslate()\r\n\r\n  return (\r\n    <PageLayout>\r\n      <TopHead/>\r\n      <Head title={t('title')}>\r\n        <LocaleSelect/>\r\n      </Head>\r\n      <Navigation/>\r\n      <Spinner active={select.waiting}>\r\n        <ProfileCard data={select.profile}/>\r\n      </Spinner>\r\n    </PageLayout>\r\n  )\r\n}\r\n\r\nexport default memo(Profile)\r\n","import {memo, useEffect} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport useSelector from \"@src/hooks/use-selector\";\r\nimport {useLocation, useNavigate} from \"react-router-dom\";\r\n\r\nfunction Protected({children, redirect}) {\r\n\r\n  const select = useSelector(state => ({\r\n    exists: state.session.exists,\r\n    waiting: state.session.waiting\r\n  }));\r\n\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    if (!select.exists && !select.waiting) {\r\n      navigate(redirect, {state: { back: location.pathname }});\r\n    }\r\n  }, [select.exists, select.waiting]);\r\n\r\n  if (!select.exists || select.waiting){\r\n    return <div>Ждём...</div>\r\n  } else {\r\n    return children;\r\n  }\r\n}\r\n\r\nProtected.propTypes = {\r\n  redirect: PropTypes.string,\r\n  children: PropTypes.node,\r\n}\r\n\r\nexport default memo(Protected);\r\n","import {memo, FC} from 'react'\r\nimport numberFormat from \"@src/utils/number-format\"\r\nimport {cn as bem} from \"@bem-react/classname\"\r\nimport {Link} from \"react-router-dom\"\r\nimport './style.css'\r\n\r\ninterface IItemBasketProps {\r\n  item: {\r\n    _id: string | number\r\n    title?: string\r\n    price?: number\r\n    amount?: number\r\n  }\r\n  link: string\r\n  onLink: () => void\r\n  onRemove: (id: string | number) => void\r\n  labelCurr?: string\r\n  labelDelete: string\r\n  labelUnit: string\r\n}\r\n\r\nconst ItemBasket: FC<IItemBasketProps> = ({\r\n  item,\r\n  link,\r\n  onLink,\r\n  onRemove,\r\n  labelCurr = '₽',\r\n  labelDelete = 'Удалить',\r\n  labelUnit = 'шт',\r\n}) => {\r\n\r\n  const cn = bem('ItemBasket')\r\n\r\n  const callbacks = {\r\n    onRemove: () => onRemove(item._id)\r\n  }\r\n\r\n  return (\r\n    <div className={cn()}>\r\n      {/*<div className={cn('code')}>{props.item._id}</div>*/}\r\n      <div className={cn('title')}>\r\n        {link\r\n          ? <Link to={link} onClick={onLink}>{item.title}</Link>\r\n          : item.title}\r\n      </div>\r\n      <div className={cn('right')}>\r\n        <div className={cn('cell')}>{numberFormat(item.price)} {labelCurr}</div>\r\n        <div className={cn('cell')}>{numberFormat(item.amount || 0)} {labelUnit}</div>\r\n        <div className={cn('cell')}><button onClick={callbacks.onRemove}>{labelDelete}</button></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(ItemBasket)\r\n","import {memo, useEffect, useRef, FC} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface IModalLayoutProps {\r\n  title?: string\r\n  onClose: () => void\r\n  children: React.ReactNode\r\n  labelClose?: string\r\n  hideButton?: boolean\r\n}\r\n\r\nconst ModalLayout: FC<IModalLayoutProps> = ({\r\n  title = 'Модалка',\r\n  onClose,\r\n  children,\r\n  labelClose = 'Закрыть',\r\n  hideButton = true,\r\n}) => {\r\n\r\n  const cn = bem('ModalLayout')\r\n\r\n  // Корректировка центра, если модалка больше окна браузера.\r\n  const layout = useRef<HTMLDivElement>(null)\r\n  const frame = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    const resizeObserver = new ResizeObserver(() => {\r\n      if (layout.current && frame.current) {\r\n        // Центрирование frame или его прижатие к краю, если размеры больше чем у layout\r\n        layout.current.style.alignItems = (layout.current.clientHeight < frame.current.clientHeight)\r\n          ? 'flex-start'\r\n          : 'center'\r\n        layout.current.style.justifyContent = (layout.current.clientWidth < frame.current.clientWidth)\r\n          ? 'flex-start'\r\n          : 'center'\r\n      }\r\n    })\r\n    // Следим за изменениями размеров layout\r\n    if (layout.current) {\r\n      resizeObserver.observe(layout.current)\r\n    }\r\n    document.body.style.overflow = 'hidden'\r\n    return () => {\r\n      document.body.style.overflow = 'auto'\r\n      resizeObserver.disconnect();\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className={cn()} ref={layout}>\r\n      <div className={cn('frame')} ref={frame}>\r\n        <div className={cn('head')}>\r\n          <h1 className={cn('title')}>{title}</h1>\r\n          {hideButton && <button className={cn('close')} onClick={onClose}>{labelClose}</button>}\r\n        </div>\r\n        <div className={cn('content')}>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n  }\r\n\r\nexport default memo(ModalLayout)\r\n","import { memo, FC } from 'react'\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport numberFormat from \"@src/utils/number-format\"\r\nimport './style.css'\r\n\r\ninterface IBasketTotalProps {\r\n  sum?: number\r\n  t: any\r\n}\r\nconst BasketTotal: FC<IBasketTotalProps> = ({ sum = 0, t }) => {\r\n  const cn = bem('BasketTotal')\r\n  return (\r\n    <div className={cn()}>\r\n      <span className={cn('cell')}>{t('basket.total')}</span>\r\n      <span className={cn('cell')}> {numberFormat(sum)} ₽</span>\r\n      <span className={cn('cell')}></span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(BasketTotal)\r\n","/**\r\n * Поиск id для удаления модалки\r\n * @param {Array} modals \r\n * @param {String} name \r\n * @returns id\r\n */\r\nexport default function closeId(modals, name) {\r\n    const modal = modals.find((item) => item.name === name)\r\n    return modal.id\r\n  }","import {memo, useCallback, useEffect} from 'react'\r\nimport {useDispatch, useStore as useStoreRedux} from 'react-redux'\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport {useSelector as useSelectorRedux} from 'react-redux'\r\nimport useInit from \"@src/hooks/use-init\"\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport ItemBasket from \"@src/components/item-basket\"\r\nimport List from \"@src/components/list\"\r\nimport ModalLayout from \"@src/components/modal-layout\"\r\nimport BasketTotal from \"@src/components/basket-total\"\r\nimport modalsActions from '@src/store-redux/modals/actions'\r\nimport Button from '@src/components/button'\r\nimport codeGenerator from \"@src/utils/code-generator\"\r\nimport generateUniqueId from \"@src/utils/unicque_id\"\r\nimport closeId from '@src/utils/closeId'\r\n\r\n\r\nfunction Basket() {\r\n\r\n  const store = useStore()\r\n  const dispatch = useDispatch()\r\n\r\n  const select = useSelector((state: any) => ({\r\n    list: state.basket.list,\r\n    amount: state.basket.amount,\r\n    sum: state.basket.sum,\r\n    selected: state.basket.selected\r\n  }))\r\n\r\n  const statusCatalogModal = useSelectorRedux((state: any) => state.modals.statusCatalogModal)\r\n  const stateModal = useSelectorRedux((state: any) => state.modals.modals)\r\n\r\n  const id = generateUniqueId()\r\n\r\n  // function closeId(modals, name) {\r\n  //   const modal = modals.filter((item) => item.name === name)\r\n  //   return modal.id\r\n  // }\r\n\r\n  const callbacks = {\r\n    // Удаление из корзины\r\n    removeFromBasket: useCallback((id: string | number) => store.actions.basket.removeFromBasket(id as string), [store]),\r\n    // Закрытие модалки\r\n    closeModal: useCallback(() => {\r\n      // dispatch(modalsActions.closeModal('basket', id))\r\n      dispatch(modalsActions.closeModal(closeId(stateModal, 'basket')))\r\n    }, [store]),\r\n    // Открытие модалки для выбра товаров\r\n    openModal: useCallback(() => {\r\n      // dispatch(modalsActions.open('goods', id))\r\n      dispatch(modalsActions.open({name: 'goods', id: id}))\r\n    }, [store]),\r\n  }\r\n\r\n  const {t} = useTranslate();\r\n\r\n  const renders = {\r\n    itemBasket: useCallback((item: {_id: string | number}) => (\r\n      <ItemBasket item={item}\r\n                  link={`/articles/${item._id}`}\r\n                  onRemove={callbacks.removeFromBasket}\r\n                  onLink={callbacks.closeModal}\r\n                  labelUnit={t('basket.unit')}\r\n                  labelDelete={t('basket.delete')}\r\n      />\r\n    ), [callbacks.removeFromBasket, t]),\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(statusCatalogModal) {\r\n      // Добавление выбранных товаров из модального окна\r\n       store.actions.basket.addingSelectedProducts()\r\n    }\r\n  // Очистка статуса закрытия модалки с выбранными товарами\r\n  dispatch(modalsActions.changeStatusCatalogModal(null))\r\n  }, [statusCatalogModal])\r\n\r\n  return (\r\n    <ModalLayout title={t('basket.title')} labelClose={t('basket.close')}\r\n                 onClose={callbacks.closeModal}>\r\n      <List list={select.list} renderItem={renders.itemBasket}/>\r\n      <BasketTotal sum={select.sum} t={t}/>\r\n      <Button value='Выбрать ещё товар' onClick={callbacks.openModal}/>\r\n    </ModalLayout>\r\n  );\r\n}\r\n\r\nexport default memo(Basket);\r\n","import {memo, ReactNode, FC} from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface IGoodsQuantityLayoutProps {\r\n  children: ReactNode\r\n  handleCancelClick: () => void\r\n  handleAddClick: () => void\r\n}\r\n\r\nconst GoodsQuantityLayout: FC<IGoodsQuantityLayoutProps> = ({ children, handleCancelClick, handleAddClick }) => {\r\n  const cn = bem('Goods-quantity')\r\n  return (\r\n    <div className={cn()}>\r\n      <div className={cn('wrap-input')}>\r\n        <label className={cn('label')}>Количество товара</label>\r\n        <div className={cn('input')}>\r\n        {children}\r\n        </div>\r\n      </div>\r\n      <div className={cn('wrap-button')}>\r\n        <button className={cn('button')} onClick={handleCancelClick}>Отмена</button>\r\n        <button className={cn('button')} onClick={handleAddClick}> Ок</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(GoodsQuantityLayout)","import {memo, useCallback, useRef} from 'react';\r\nimport {useDispatch, useStore as useStoreRedux} from 'react-redux';\r\nimport {useSelector as useSelectorRedux} from 'react-redux';\r\nimport useStore from \"@src/hooks/use-store\";\r\nimport useTranslate from \"@src/hooks/use-translate\";\r\nimport ModalLayout from \"@src/components/modal-layout\";\r\nimport modalsActions from '@src/store-redux/modals/actions';\r\nimport GoodsQuantityLayout from '@src/components/goods-quantity-layout';\r\nimport Input from '@src/components/input'\r\nimport closeId from '@src/utils/closeId';\r\n\r\nfunction GoodsQuantity() {\r\n\r\n  const store = useStore();\r\n  const dispatch = useDispatch();\r\n  const quantityGoodsRef = useRef(null)\r\n\r\n  const stateModal = useSelectorRedux(state => state.modals.modals)\r\n\r\n  const callbacks = {\r\n    handleCancel: useCallback(() => {\r\n      // dispatch(modalsActions.closeModal('quantity'))\r\n      dispatch(modalsActions.closeModal(closeId(stateModal, 'quantity')))\r\n    }, [store]),\r\n    handleAdd: useCallback(() => {\r\n        store.actions.basket.updateQuantityProduct(Number(quantityGoodsRef.current))\r\n        //  dispatch(modalsActions.closeModal('quantity'))\r\n        dispatch(modalsActions.closeModal(closeId(stateModal, 'quantity')))\r\n    }, [store]),\r\n    onChange: useCallback((value) => {\r\n        quantityGoodsRef.current = value\r\n    }, [store])\r\n  }\r\n\r\n  const {t} = useTranslate();\r\n\r\n  return (\r\n    <ModalLayout \r\n      title='' \r\n      labelClose={t('basket.close')}\r\n      onClose={callbacks.closeModal}\r\n      hideButton={false}>\r\n        <GoodsQuantityLayout handleCancelClick={callbacks.handleCancel} handleAddClick={callbacks.handleAdd}>\r\n          <Input\r\n            value=''\r\n            name='quantity'\r\n            type='number'\r\n            placeholder=''\r\n            onChange={callbacks.onChange}\r\n            theme=''/>\r\n        </GoodsQuantityLayout>\r\n    </ModalLayout>\r\n  );\r\n}\r\n\r\nexport default memo(GoodsQuantity);","import {memo, useCallback, useRef} from 'react';\r\nimport {useDispatch, useStore as useStoreRedux} from 'react-redux';\r\nimport useInit from '@src/hooks/use-init';\r\nimport useStore from \"@src/hooks/use-store\";\r\nimport useTranslate from \"@src/hooks/use-translate\";\r\nimport ModalLayout from \"@src/components/modal-layout\"\r\nimport modalsActions from '@src/store-redux/modals/actions'\r\nimport CatalogList from '@src/containers/catalog-list'\r\nimport { CatalogFilterForModal } from '@src/containers/hoc/with-catalog-filter'\r\nimport {useSelector as useSelectorRedux} from 'react-redux'\r\nimport closeId from '@src/utils/closeId'\r\n\r\nfunction Goods() {\r\n\r\n  const store = useStore()\r\n  const dispatch = useDispatch()\r\n\r\n  const stateModal = useSelectorRedux(state => state.modals.modals)\r\n\r\n  const callbacks = {\r\n    closeModal: useCallback(() => {\r\n      // Закрытие модалки\r\n      // dispatch(modalsActions.closeModal('goods'));\r\n      dispatch(modalsActions.closeModal(closeId(stateModal, 'goods')));\r\n      // Установлен статус \"модалка закрыта\" для дальнейшего добавления выбранных товаров\r\n      dispatch(modalsActions.changeStatusCatalogModal(true));\r\n      }, [store]),\r\n  }\r\n\r\n  useInit(() => {\r\n      store.actions.catalog_modal.initParams()\r\n  }, [], true);\r\n\r\n  const {t} = useTranslate();\r\n\r\n  return (\r\n    <ModalLayout \r\n      title='' \r\n      labelClose={t('basket.close')}\r\n      onClose={callbacks.closeModal}>\r\n        <CatalogFilterForModal/>\r\n        <CatalogList stateName='catalog_modal'/>\r\n    </ModalLayout>\r\n  );\r\n}\r\n\r\nexport default memo(Goods);","import {memo} from \"react\";\r\nimport {useSelector as useSelectorRedux} from \"react-redux\";\r\nimport Basket from \"@src/app/modals/basket\";\r\nimport GoodsQuantity from \"@src/app/modals/goods-quantity\";\r\nimport Goods from \"@src/app/modals/goods\";\r\n\r\nfunction Modals() {\r\n\r\n  const namesModal = useSelectorRedux(state => state.modals.modals);\r\n\r\n  return (\r\n    <>\r\n    {namesModal.map((item, index) => (\r\n      <div key={index}>\r\n        {item.name === 'basket' && <Basket/>}\r\n        {item.name === 'quantity' && <GoodsQuantity/>}\r\n        {item.name === 'goods' && <Goods/>}\r\n      </div>\r\n    ))}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default memo(Modals);","export default \"__VITE_ASSET__DkvaPZ5v__\"","import { memo, FC } from \"react\"\r\nimport { cn as bem } from \"@bem-react/classname\"\r\n\r\nimport \"./style.css\"\r\n\r\ninterface IChatButtonProps {\r\n  onLastMessage: () => void\r\n  clearChat: () => void\r\n  onNewMessage: () => void\r\n}\r\nconst ChatButton: FC<IChatButtonProps> = ({\r\n  onLastMessage,\r\n  clearChat,\r\n  onNewMessage,\r\n}) => {\r\n  const cn = bem(\"Buttons\")\r\n  return (\r\n    <div className={cn(\"wrap-button\")}>\r\n      <button\r\n        className={cn(\"button\", { button_bottom: true })}\r\n        onClick={onLastMessage}\r\n      >\r\n        Старые сообщения\r\n      </button>\r\n      <button\r\n        className={cn(\"button\", { button_bottom: true })}\r\n        onClick={clearChat}\r\n      >\r\n        Очистить чат\r\n      </button>\r\n      <button\r\n        className={cn(\"button\", { button_bottom: true })}\r\n        onClick={onNewMessage}\r\n      >\r\n        Новые сообщения\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(ChatButton)\r\n","import React, { memo } from \"react\"\r\nimport { cn as bem } from \"@bem-react/classname\"\r\nimport \"./style.css\"\r\n\r\nconst MessageCheck: React.FC = () => {\r\n  const cn = bem(\"Message\")\r\n\r\n  return (\r\n    <div className={cn(\"wrap-check\")}>\r\n      <div className={cn(\"wrap_1\")}>\r\n        <span id=\"check-part-1\" className={cn(\"check\")}></span>\r\n        <span id=\"check-part-2\" className={cn(\"check\")}></span>\r\n      </div>\r\n      <div className={cn(\"wrap_2\")}>\r\n        <span id=\"check-part-1\" className={cn(\"check\")}></span>\r\n        <span id=\"check-part-2\" className={cn(\"check\")}></span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(MessageCheck)\r\n","  export default function getTimeFromDate(dateString: string) {\r\n    let dateObject = new Date(dateString);\r\n    let time = dateObject.toTimeString().split(' ')[0];\r\n    return time;\r\n}","import React, { memo, useState } from \"react\"\r\nimport DOMPurify from 'dompurify'\r\nimport { cn as bem } from \"@bem-react/classname\"\r\nimport { IChat } from \"@src/store/chat/types\"\r\nimport Img from \"../../assets/images/avatar.png\"\r\nimport ChatButton from \"./chat-button\"\r\nimport MessageCheck from \"./message-check\"\r\nimport getTimeFromDate from \"@src/utils/time-from-date\"\r\nimport \"./style.css\"\r\n\r\ninterface IChatLayout {\r\n  onMessage: () => void\r\n  onLastMessage: () => void\r\n  onNewMessage: () => void\r\n  clearChat: () => void\r\n  textarea: () => React.ReactNode\r\n  font: () => React.ReactNode\r\n  setFontOpen: React.Dispatch<React.SetStateAction<boolean>>\r\n  messages: IChat[]\r\n  name: string\r\n  statusClearChat: boolean\r\n  isfontOpen: boolean\r\n  connected: boolean\r\n}\r\n\r\nconst ChatLayout = React.forwardRef<HTMLDivElement, IChatLayout>((props, ref) =>  {\r\n    const {\r\n        onMessage,\r\n        onLastMessage,\r\n        onNewMessage,\r\n        clearChat,\r\n        textarea,\r\n        font,\r\n        setFontOpen,\r\n        connected,\r\n        isfontOpen,\r\n        messages,\r\n        name,\r\n        statusClearChat\r\n      } = props\r\n  const cn = bem(\"Chat\")\r\n\r\n  return (\r\n    <div className={cn()}>\r\n        {statusClearChat && <p className={cn(\"title\")}>Сообщения удалены</p>}\r\n        {messages.length < 1 && <p className={cn(\"title\")}>Время ожидания сообщений</p>}\r\n        {messages?.map((item) => (\r\n          <div \r\n          className={cn(\"wrap-message\", { right: item.author.username === name})} \r\n          key={item._id}\r\n          ref={ref}>\r\n            <div className={cn(\"message\")}>\r\n                <img className={cn(\"img\")} src={Img} alt='Avatar'></img>\r\n                <p className={cn(\"time\")}>{getTimeFromDate(item.dateCreate)}</p>\r\n                <p className={cn(\"name\")}>{item.author.username}</p>\r\n              <div className={cn(\"text\")} dangerouslySetInnerHTML={{__html: DOMPurify.sanitize(item.text)}}/>\r\n              <MessageCheck/>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      <div className={cn(\"input\")}>\r\n        <button className={cn(\"font\")} onClick={() => setFontOpen(prev => !prev)}>шрифт</button>\r\n        {isfontOpen && font()}\r\n        {textarea()}\r\n        <div>\r\n         {connected && <button className={cn(\"button\")} onClick={onMessage}>\r\n            Отправить\r\n          </button>} \r\n        </div>\r\n      </div>\r\n      <ChatButton \r\n        onLastMessage={onLastMessage}\r\n        clearChat={clearChat}\r\n        onNewMessage={onNewMessage}\r\n        />\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default memo(ChatLayout)\r\n","export default \"__VITE_ASSET__xE4bX5_N__\"","import React, {\r\n  useState,\r\n  ChangeEvent,\r\n  useCallback,\r\n  memo,\r\n  useEffect,\r\n} from \"react\"\r\nimport debounce from \"lodash.debounce\"\r\nimport { cn as bem } from \"@bem-react/classname\"\r\nimport Picker from \"emoji-picker-react\"\r\nimport Img from \"../../../assets/images/smail.png\"\r\nimport \"./style.css\"\r\n\r\ninterface IProps {\r\n  value: string\r\n  placeholder: string\r\n  isBold: boolean\r\n  addMessage: (value: string, name?: string | undefined) => void\r\n  adjustTextareaHeight: () => void\r\n\r\n}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, IProps>(\r\n  ({ placeholder, value, isBold, addMessage, adjustTextareaHeight }, ref) => {\r\n    const cn = bem(\"Textarea\")\r\n\r\n    const [message, setMessage] = useState<string>(value)\r\n    const [showPicker, setShowPicker] = useState(false)\r\n\r\n    const handleChange = (event: ChangeEvent<HTMLTextAreaElement>) => {\r\n      setMessage(event.target.value)\r\n      onChangeDebounce(event.target.value)\r\n      adjustTextareaHeight()\r\n    };\r\n\r\n    const onChangeDebounce = useCallback(\r\n      debounce((value: string) => addMessage(value, \"message\"), 600),\r\n      [addMessage, value]\r\n    );\r\n\r\n    const onEmojiClick = (emojiObject: any) => {\r\n        console.log('emojiObject.emoji', emojiObject.emoji)\r\n        setMessage(prev => prev + emojiObject.emoji)\r\n        onChangeDebounce(message + emojiObject.emoji);\r\n        // setShowPicker(false)\r\n      };\r\n\r\n    useEffect(() => {\r\n      showPicker && window?.scrollTo(0,document.body.scrollHeight)\r\n    }, [showPicker])\r\n\r\n    useEffect(() => setMessage(value), [value])\r\n\r\n    return (\r\n      <>\r\n      {showPicker && <Picker\r\n          lazyLoadEmojis={true}\r\n          onEmojiClick={onEmojiClick}\r\n          autoFocusSearch={true} />\r\n          }\r\n        <img\r\n          className={cn(\"emoji-icon\")}\r\n          src={Img}\r\n          onClick={() => setShowPicker((val) => !val)}\r\n        />\r\n        <textarea\r\n          className={cn({bold: isBold})}\r\n          ref={ref}\r\n          value={message}\r\n          onChange={handleChange}\r\n          placeholder={placeholder}\r\n          onClick={() => setShowPicker(false)}\r\n        />\r\n      </>\r\n    )\r\n  }\r\n)\r\n\r\nexport default memo(Textarea)\r\n","import { memo, FC } from \"react\"\r\nimport { cn as bem } from \"@bem-react/classname\"\r\n\r\nimport \"./style.css\"\r\n\r\ninterface IMessageFontProps {\r\n    onClickBold: () => void\r\n    onClickNormal: () => void\r\n}\r\nconst MessageFont: FC<IMessageFontProps> = ({onClickBold, onClickNormal}) => {\r\n  const cn = bem(\"Font\")\r\n  return (\r\n    <ul className={cn()}>\r\n      <li className={cn(\"normal\")} onClick={onClickNormal}>Нормальный</li>\r\n      <li className={cn(\"bold\")} onClick={onClickBold}>Жирный</li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default memo(MessageFont)","import React, { memo, FC, useEffect, useCallback, useRef, useState } from \"react\"\r\nimport ChatLayout from \"@src/components/chat-layout\"\r\nimport PageLayout from \"@src/components/page-layout\"\r\nimport Head from \"@src/components/head\"\r\nimport TopHead from \"@src/containers/top-head\"\r\nimport Navigation from \"@src/containers/navigation\"\r\nimport LocaleSelect from \"@src/containers/locale-select\"\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport useStore from \"@src/hooks/use-store\" \r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport Textarea from \"@src/components/chat-layout/textarea\"\r\nimport MessageFont from \"@src/components/chat-layout/message-font\" \r\nimport { StoreState } from \"@src/store/types\"\r\n\r\nconst Chat: FC = () => {\r\n\r\n  const {t} = useTranslate() \r\n\r\n  const store = useStore()\r\n  const lastMessageRef = useRef() as any\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\r\n  const [isBold, setIsBold] = useState(false)\r\n  const [fontOpen, setFontOpen] = useState(false)\r\n\r\n  const select = useSelector((state: StoreState) => ({\r\n    messages: state.chat.messages,\r\n    message: state.chat.message,\r\n    name: state.session.user as any,\r\n    statusClearChat: state.chat.statusClearChat,\r\n    connected: state.chat.connected\r\n  }));\r\n\r\n  const callbacks = {\r\n    // Отправка сообщения\r\n    onMessage: useCallback(() => {\r\n      store.actions.chat.newMessage()\r\n      store.actions.chat.deleteMessage()\r\n      resetTextareaHeight()\r\n    }, [store]),\r\n    // Сохранение сообщения\r\n    onChange: useCallback((value: string, name?: string)=> {store.actions.chat.setMessage(value)}, [store]),\r\n    // Запрос старых сообщений\r\n    onLastMessage: useCallback(() => {\r\n      store.actions.chat.requestOldMessage()\r\n    }, [store]),\r\n    // Запрос новых сообщений\r\n    onNewMessage: useCallback(() => {\r\n      store.actions.chat.requestLatestMessages()\r\n    }, [store]),\r\n    // Очистить чат\r\n    clearChat: useCallback(() => {\r\n        store.actions.chat.deleteAllMessages()\r\n    }, [store]),\r\n    // Регулирование высоты textarea\r\n    adjustTextareaHeight: useCallback(() => {\r\n      const textarea = textareaRef.current\r\n      if (textarea) {\r\n        textarea.style.height = 'auto'\r\n        textarea.style.height = `${textarea.scrollHeight}px`\r\n    }\r\n    }, [store]),\r\n    // Добавление жирного шрифта\r\n    handleBold: useCallback(() => {\r\n      setIsBold(true)\r\n      setFontOpen(false)\r\n    }, [setIsBold]),\r\n    // Отмена жирного шрифта\r\n    handleNormal: useCallback(() => {\r\n      setIsBold(false)\r\n      setFontOpen(false)\r\n    }, [setIsBold]),\r\n    // Показать или скрыть шрифты\r\n    handleFont: useCallback(() => {\r\n      setFontOpen(!fontOpen)\r\n    }, [setFontOpen]),\r\n  }\r\n\r\n  const resetTextareaHeight = () => {\r\n    const textarea = textareaRef.current\r\n    if (textarea) {\r\n      textarea.style.height = 'auto'\r\n    }\r\n}\r\n\r\n  const renders = {\r\n    textarea: useCallback(\r\n      () => (\r\n        <Textarea\r\n          placeholder=\"Написать сообщение...\" \r\n          addMessage={callbacks.onChange} \r\n          adjustTextareaHeight={callbacks.adjustTextareaHeight}\r\n          value={select.message}\r\n          ref={textareaRef}\r\n          isBold={isBold}\r\n        />\r\n      ),\r\n      [store, callbacks.onChange, select.message]\r\n    ),\r\n    font: useCallback(\r\n      () => (\r\n        <MessageFont\r\n        onClickBold={callbacks.handleBold}\r\n        onClickNormal={callbacks.handleNormal}\r\n        />\r\n      ),\r\n      [store, callbacks.onChange, select.message]\r\n    ),\r\n  }\r\n \r\n  useEffect(() => {\r\n    store.actions.chat.onConnect()\r\n     return () => store.actions.chat.close()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (lastMessageRef.current) {\r\n      lastMessageRef.current.scrollIntoView({ behavior: \"smooth\" })\r\n    }\r\n  }, [select.messages]);\r\n\r\n  return (\r\n    <PageLayout>\r\n      <TopHead />\r\n      <Head title={t(\"menu.chat\")}>\r\n        <LocaleSelect />\r\n      </Head>\r\n      <Navigation />\r\n      <ChatLayout \r\n        onMessage={callbacks.onMessage} \r\n        onLastMessage={callbacks.onLastMessage}\r\n        onNewMessage={callbacks.onNewMessage}\r\n        clearChat={callbacks.clearChat}\r\n        messages={select.messages}\r\n        name={select.name.username}\r\n        ref={lastMessageRef}\r\n        statusClearChat={select.statusClearChat}\r\n        textarea={renders.textarea}\r\n        font={renders.font}\r\n        isfontOpen={fontOpen}\r\n        setFontOpen={setFontOpen}\r\n        connected={select.connected}/>\r\n    </PageLayout>\r\n  )\r\n}\r\n\r\nexport default memo(Chat)\r\n","import { Rect } from \"../types\"\r\n\r\nclass Figure {\r\n  x: number = 0;\r\n  y: number = 0;\r\n  width: number = 10;\r\n  height: number = 10;\r\n  angle: number = 10;\r\n  time: number = performance.now();\r\n  pause: boolean = false;\r\n\r\n  constructor(x: number = 0, y: number = 0, width: number = 10, height: number = 10) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  animate(time: number) {\r\n    // Время \"жизни\" фигуры\r\n    const t = (time - this.time);\r\n\r\n    // Изменение угла без укореняем\r\n    this.angle += 5;\r\n    if (this.angle > 360 || this.angle < -360) this.angle = 0;\r\n  }\r\n\r\n  setPause(pause = true){\r\n    this.pause = pause;\r\n    this.time = performance.now();\r\n  };\r\n\r\n  setPosition({x, y}: {x: number, y: number}){\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  /**\r\n   * Прямоугольная область элемента\r\n   */\r\n  getBoundRect(): Rect {\r\n    return {\r\n      x1: this.x,\r\n      y1: this.y,\r\n      x2: this.x + this.width,\r\n      y2: this.y + this.height\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Проверка попадания элемента в прямоугольную область\r\n   * @param rect\r\n   */\r\n  isIntersectRect(rect: Rect) {\r\n    const bound = this.getBoundRect();\r\n    return (\r\n      bound.x1 <= rect.x2 && bound.x2 >= rect.x1 &&\r\n      bound.y1 <= rect.y2 && bound.y2 >= rect.y1\r\n    );\r\n  }\r\n\r\n  get zIndex(){\r\n    return 0;\r\n  }\r\n\r\n  draw(ctx: CanvasRenderingContext2D) {\r\n    // Добавление трансформации поворота\r\n    // Смещение origin в центр фигуры\r\n    ctx.translate((this.x + this.width / 2), (this.y + this.height / 2));\r\n    // Поворот относительно origin\r\n    ctx.rotate(this.angle * Math.PI / 180);\r\n    // Возвращаем origin обратно\r\n    ctx.translate(-(this.x + this.width / 2), -(this.y + this.height / 2));\r\n    // Rect\r\n    ctx.fillStyle = '#777';\r\n    ctx.fillRect(this.x, this.y, this.width, this.height);\r\n  }\r\n}\r\n\r\nexport default Figure;","export default function randomItem<A>(items: A[]):A {\r\n    return items[Math.floor(Math.random() * items.length)];\r\n  }","export default \"__VITE_ASSET__BhTlgWLM__\"","export default \"__VITE_ASSET__ufGdF7Ev__\"","export default \"__VITE_ASSET__YLpVpO$a__\"","export default \"__VITE_ASSET__FXq5WEb8__\"","export default \"__VITE_ASSET__DkDh2zP0__\"","export default \"__VITE_ASSET__DSmw4wZw__\"","export default \"__VITE_ASSET__DPplbRnV__\"","export default \"__VITE_ASSET__DQ2zzKrQ__\"","export default \"__VITE_ASSET__C9ZVUeIo__\"","export default \"__VITE_ASSET__DvyRagRX__\"","import leaf1 from './leave01.png'\r\nimport leaf2 from './leave02.png'\r\nimport leaf3 from './leave03.png'\r\nimport leaf4 from './leave04.png'\r\nimport leaf6 from './leave06.png'\r\nimport leaf7 from './leave07.png'\r\nimport leaf8 from './leave08.png'\r\nimport leaf9 from './leave09.png'\r\nimport leaf10 from './leave10.png'\r\nimport leaf11 from './leave11.png'\r\n\r\nexport default [leaf1, leaf2, leaf3, leaf4, leaf6, leaf7, leaf7, leaf8, leaf9, leaf10, leaf11]","export default function roundRange(value: number, min: number, max: number):number {\r\n    return Math.max(min, Math.min(max, value));\r\n  }","import Figure from '../figure'\r\nimport {createNoise2D} from 'simplex-noise'\r\nimport randomItem from '@src/utils/random-item' \r\nimport leafsImages from '../../../../../assets/images/leaf/export'\r\nimport roundRange from \"@src/utils/round-range\"\r\n\r\nconst maxX = 500 // По сути ширина канвы, чтобы случайное число растянуть плавно на размер канвы\r\nconst maxY = 500\r\nconst maxH = 100 // Максимальный размер фигуры, чтобы от размера плавно зависела случайность\r\n\r\nclass Leaf extends Figure {\r\n  loaded: boolean = false\r\n  image: HTMLImageElement = new Image()\r\n  static noiseX = createNoise2D()\r\n  static noiseY = createNoise2D()\r\n  static noiseS = createNoise2D()\r\n  static noiseA = createNoise2D()\r\n  noise = createNoise2D()\r\n  // Масштаб (имитация приближения)\r\n  scale: number = 1\r\n  // Вращение по оси Z\r\n  angleZ: number = 0\r\n  // Ускорения (будет меняться случайным образом. Начальное значение не влияет.\r\n  aX: number = 2\r\n  aY: number = 9.8\r\n  aS: number = 0\r\n  aA: number = 0\r\n  // Скорость\r\n  vX: number = 0\r\n  vY: number = 0\r\n  vS: number = 0\r\n  vA: number = 0\r\n\r\n  constructor() {\r\n    super()\r\n    this.image.onload = () => {\r\n      this.loaded = true\r\n      this.reset()\r\n    }\r\n    this.renew()\r\n  }\r\n\r\n  renew() {\r\n    const src = randomItem(leafsImages)\r\n    if (src !== this.image.src) {\r\n      this.loaded = false\r\n      this.image.src = src\r\n    } else {\r\n      this.reset()\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    // Новый собственный шум\r\n    this.noise = createNoise2D()\r\n    // Новая начальная координата\r\n    this.x = Math.random() * 1500\r\n    this.y = -(Math.random() * 800 + 200)\r\n    this.scale = Math.random() * 0.01\r\n    this.width = this.image.width * this.scale\r\n    this.height = this.image.height * this.scale\r\n    this.angle = 0\r\n    this.angleZ = 0\r\n    // Скорость (начальная)\r\n    this.vX = 0\r\n    this.vY = Math.random() * 100 + 10\r\n    this.vS = Math.random() * 5\r\n    this.vA = Math.random() * 5\r\n  }\r\n\r\n  override get zIndex() {\r\n    return this.width || 0\r\n  }\r\n\r\n  override animate(time: number) {\r\n    if (this.loaded) {\r\n      // Время с прошлого расчёта\r\n      const dt = (time - this.time) / 2000\r\n\r\n      const random = this.noise(this.x / maxX, this.y / maxY)\r\n      const randomX = Leaf.noiseX(this.x / maxX, this.y / maxY) * random\r\n      const randomY = Leaf.noiseY(this.x / maxX, this.y / maxY) * random\r\n      const randomS = Leaf.noiseS(this.x / maxX, this.y / maxY) * random\r\n      const randomA = Leaf.noiseA(this.x / maxX, this.y / maxY) * random\r\n\r\n      if (this.y < 1000 && this.y > -800 && this.x > -500 && this.x < 2000) {\r\n        this.aX = randomX * 500\r\n        this.aY = randomY + 50 /// Сдвиг к положительному, чтобы вверх реже летали\r\n        this.aS = randomS / 600\r\n        this.aA = randomA * 5\r\n\r\n        // Равноускоренное перемещение за dt\r\n        if (!this.pause) {\r\n          this.x += (this.vX * dt) + (this.aX * dt ** 2 / 2)\r\n          this.y += (this.vY * dt) + (this.aY * dt ** 2 / 2)\r\n        }\r\n        this.scale += this.aS //(this.vS * dt) + (this.aS * dt ** 2 / 2);\r\n        this.angle += this.aA //(this.vA * dt) + (this.aA * dt ** 2 / 2);\r\n        this.angleZ = (this.aA + 1) / 2\r\n\r\n        // Текущая скорость, чтобы рассчитывать новую позицию в следующий раз\r\n        if (!this.pause) {\r\n          this.vX = this.vX + this.aX * dt\r\n          this.vY = this.vY + this.aY * dt\r\n        }\r\n        this.vS = this.vS + this.aS * dt\r\n        this.vA = this.vA + this.aA * dt\r\n\r\n        // Корректировка scale, чтобы оставался в нужном диапазоне и расчёт размеров с учётом scale\r\n        this.scale = roundRange(this.scale, 0.5, 50)\r\n        this.width = this.image.width * this.scale\r\n        this.height = this.image.height * this.scale\r\n      } else {\r\n        // Обновить лист\r\n        this.renew()\r\n      }\r\n    }\r\n    this.time = time\r\n  }\r\n\r\n  override draw(ctx: CanvasRenderingContext2D) {\r\n    if (this.loaded) {\r\n      ctx.save()\r\n      // rotate по центру картинки\r\n      ctx.translate(this.x + this.width / 2, this.y + this.height / 2)\r\n      ctx.rotate(this.angle * Math.PI / 180)\r\n      //ctx.scale(this.angleZ, 1)\r\n      ctx.translate(-(this.x + this.width / 2), -(this.y + this.height / 2))\r\n      // rect\r\n      // ctx.fillStyle = 'rgba(137,255,91,0.7)'\r\n      // ctx.fillRect(this.x, this.y, this.width, this.height)\r\n      ctx.drawImage(this.image, this.x, this.y, this.width, this.height)\r\n      ctx.restore()\r\n    }\r\n  }\r\n}\r\n\r\nexport default Leaf","import {Action, ScrollParams, ZoomParams} from \"./types\"\r\nimport Figure from \"./elements/figure\"\r\nimport Leaf from \"./elements/leaf\"\r\n\r\nclass Core {\r\n  // DOM элемент, в котором будет создана канва\r\n  root: HTMLElement | null = null\r\n  // DOM элемент канвы\r\n  canvas: HTMLCanvasElement | null = null\r\n  // Контекст для 2D рисования\r\n  ctx: CanvasRenderingContext2D | null = null\r\n  // Элементы для рендера\r\n  elements: Figure[] = []\r\n  // Метрики канвы\r\n  metrics = {\r\n    left: 0,\r\n    top: 0,\r\n    width: 0,\r\n    height: 0,\r\n    dpr: 1,\r\n    scrollX: 0,\r\n    scrollY: 0,\r\n    zoom: 1\r\n  };\r\n  // Активное действие (обычно при зажатой клавиши мышки)\r\n  action: Action | null = null\r\n\r\n  constructor() {\r\n    for (let i = 0; i < 70; i++){\r\n      this.elements.push(new Leaf())\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Монтирование канвы в DOM элемент (dom)\r\n   * @param root\r\n   */\r\n  mount(root: HTMLElement) {\r\n    this.root = root\r\n    this.canvas = document.createElement('canvas')\r\n    this.root.appendChild(this.canvas)\r\n\r\n    // Отслеживаем изменение размеров окна (хотя лучше повесить ResizeObserver на root)\r\n    window?.addEventListener('resize', this.resize)\r\n    // Нажатие мышки отслеживается только в рамках канвы\r\n    this.canvas.addEventListener('mousedown', this.onMouseDown)\r\n    // Перемещение и отпускание кнопки мышки отслеживаем в рамках всего окна\r\n    // чтобы не ломалась логика, если после нажатия мышь случайна вышла за рамки канвы\r\n    window?.addEventListener('mousemove', this.onMouseMove)\r\n    window?.addEventListener('mouseup', this.onMouseUp)\r\n    this.canvas.addEventListener('wheel', this.onMouseWheel)\r\n\r\n    this.ctx = this.canvas.getContext('2d', {alpha: false})\r\n    if (this.ctx) {\r\n      this.ctx.imageSmoothingEnabled = false\r\n      // Актуализация размеров канвы\r\n      this.resize()\r\n      // Запуск цикла рендера\r\n      this.draw()\r\n    } else {\r\n      throw new Error('Не удалось создать CanvasRenderingContext2D')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Демонтирование канвы\r\n   */\r\n  unmount() {\r\n    // Отписка от всех событий\r\n    if (this.canvas) {\r\n      window?.removeEventListener('resize', this.resize)\r\n      window?.removeEventListener('mousemove', this.onMouseMove)\r\n      window?.removeEventListener('mouseup', this.onMouseUp)\r\n      this.canvas.removeEventListener('mousedown', this.onMouseDown)\r\n      this.canvas.removeEventListener('wheel', this.onMouseWheel)\r\n      // Удаление канвы\r\n      if (this.root) this.root.removeChild(this.canvas)\r\n      this.canvas = null\r\n      this.ctx = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Обработка изменения размеров/масштаба под канву\r\n   */\r\n  resize = () => {\r\n    if (this.root && this.canvas && this.ctx) {\r\n      const rect = this.root.getBoundingClientRect()\r\n      this.metrics.left = rect.left\r\n      this.metrics.top = rect.top\r\n      this.metrics.width = this.root.offsetWidth\r\n      this.metrics.height = this.root.offsetHeight\r\n      this.metrics.dpr = window?.devicePixelRatio\r\n      // Физический размер канвы с учётом плотности пикселей (т.е. канва может быть в разы больше)\r\n      this.canvas.width = this.metrics.width * this.metrics.dpr\r\n      this.canvas.height = this.metrics.height * this.metrics.dpr\r\n      // Фактический размер канвы\r\n      this.canvas.style.width = `${this.metrics.width}px`\r\n      this.canvas.style.height = `${this.metrics.height}px`\r\n      // Общая трансформация - все координаты будут увеличиваться на dpr, чтобы фигуры рисовались в увеличенном (в физическом) размере\r\n      this.ctx.scale(this.metrics.dpr, this.metrics.dpr)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Смещение области обзора (прокрутка по горизонтали и/или вертикали)\r\n   * @param x Точная позиция по горизонтали\r\n   * @param y Точная позиция по вертикали\r\n   * @param dx Добавить смещение по горизонтали\r\n   * @param dy Добавить смещение по вертикали\r\n   */\r\n  scroll({x, y, dx, dy}: ScrollParams) {\r\n    if (typeof x != 'undefined') this.metrics.scrollX = x\r\n    if (typeof y != 'undefined') this.metrics.scrollY = y\r\n    if (typeof dx != 'undefined') this.metrics.scrollX += dx\r\n    if (typeof dy != 'undefined') this.metrics.scrollY += dy\r\n  }\r\n\r\n  /**\r\n   * Установка масштаба\r\n   * @param zoom Точная установка (1 = 100%)\r\n   * @param delta Изменение текущего масштаба на коэффициент, например -0.1\r\n   * @param center Центр масштабирования (точка, которая визуально не сместится)\r\n   */\r\n  zoom({zoom, delta, center}: ZoomParams) {\r\n    // Центр масштабирования с учётом текущего смещения и масштабирования\r\n    const centerReal = {\r\n      x: (center.x + this.metrics.scrollX) / this.metrics.zoom,\r\n      y: (center.y + this.metrics.scrollY) / this.metrics.zoom\r\n    }\r\n    // Точная установка масштаба\r\n    if (typeof zoom != 'undefined') this.metrics.zoom = zoom\r\n    // Изменение масштабирования на коэффициент\r\n    if (typeof delta != 'undefined') this.metrics.zoom += delta * this.metrics.zoom\r\n    // Корректировка минимального масштаба\r\n    this.metrics.zoom = Math.max(0.1, this.metrics.zoom)\r\n    // Центр масштабирования с учётом нового масштаба\r\n    const centerNew = {\r\n      x: centerReal.x * this.metrics.zoom,\r\n      y: centerReal.y * this.metrics.zoom\r\n    }\r\n    // Корректировка смещения\r\n    this.scroll({\r\n      x: centerNew.x - center.x,\r\n      y: centerNew.y - center.y,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Поиск элемента по точке\r\n   * @param x\r\n   * @param y\r\n   */\r\n  findElementByPont({x, y}: {x: number, y: number}){\r\n    const sorted = this.elements.sort((a,b)=>{\r\n      if (a.zIndex < b.zIndex) return 1\r\n      if (a.zIndex > b.zIndex) return -1\r\n      return 0\r\n    })\r\n    for (const element of sorted){\r\n      if (element.isIntersectRect({x1: x-1, y1: y-1, x2: x+1, y2: y+2})){\r\n        return element\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  onMouseDown = (e: MouseEvent) => {\r\n    // Курсор с учётом масштабирования и скролла\r\n    const point = {\r\n      x: ((e.clientX - this.metrics.left) + this.metrics.scrollX) / this.metrics.zoom,\r\n      y: ((e.clientY - this.metrics.top) + this.metrics.scrollY) / this.metrics.zoom,\r\n    }\r\n    console.log('Сработал onMouseDown, point ===', point)\r\n    // Поиск фигуры по точке\r\n    const element = this.findElementByPont(point)\r\n\r\n    if (element){\r\n      // Перемещение фигуры (drag&drop)\r\n      this.action = {\r\n        name: 'drag',\r\n        element,\r\n        // Координата, с которой начинаем расчёт смещения\r\n        x: point.x,\r\n        y: point.y,\r\n        // Координаты фигуры\r\n        targetX: element.x,\r\n        targetY: element.y\r\n      }\r\n      element.setPause(true)\r\n    } else {\r\n      // Перемещение канвы (scroll)\r\n      this.action = {\r\n        name: 'scroll',\r\n        // Координата, с которой начинаем расчёт смещения (учитывать зум не нужно)\r\n        x: e.clientX - this.metrics.left,\r\n        y: e.clientY - this.metrics.top,\r\n        // Запоминаем исходное смещение, чтобы к нему добавлять расчётное\r\n        targetX: this.metrics.scrollX,\r\n        targetY: this.metrics.scrollY\r\n      }\r\n    }\r\n  }\r\n\r\n  onMouseMove = (e: MouseEvent) => {\r\n    // Курсор с учётом масштабирования и скролла\r\n    const point = {\r\n      x: ((e.clientX - this.metrics.left) + this.metrics.scrollX) / this.metrics.zoom,\r\n      y: ((e.clientY - this.metrics.top) + this.metrics.scrollY) / this.metrics.zoom,\r\n    }\r\n    \r\n    if (this.action) {\r\n      if (this.action.name === 'drag' && this.action.element) {\r\n        this.action.element.setPosition({\r\n          x: this.action.targetX + point.x - this.action.x,\r\n          y: this.action.targetY + point.y - this.action.y,\r\n        })\r\n      }\r\n      // Обработка действия scroll\r\n      if (this.action.name === 'scroll') {\r\n        // Скролл использует не масштабированную точку, так как сам же на неё повлиял бы\r\n        this.scroll({\r\n          x: this.action.targetX - ((e.clientX - this.metrics.left) - this.action.x),\r\n          y: this.action.targetY - ((e.clientY - this.metrics.top) - this.action.y),\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  onMouseUp = (e: MouseEvent) => {\r\n    if (this.action) {\r\n      if (this.action.name === 'drag' && this.action.element) {\r\n        this.action.element.setPause(false);\r\n      }\r\n    }\r\n    // Сброс активного действия\r\n    this.action = null\r\n  };\r\n\r\n  onMouseWheel = (e: WheelEvent) => {\r\n    e.preventDefault()\r\n    const delta = e.deltaY > 0 ? 0.1 : -0.1\r\n    if (e.ctrlKey) {\r\n      // Масштабирование\r\n      this.zoom({delta, center: {x: e.offsetX, y: e.offsetY}})\r\n    } else {\r\n      // Прокрутка по вертикали\r\n      this.scroll({dy: delta * 300})\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Рисование всего\r\n   */\r\n  draw = () => {\r\n    if (this.ctx) {\r\n      // Область рендера\r\n      const viewRect = {\r\n        x1: this.metrics.scrollX / this.metrics.zoom,\r\n        y1: this.metrics.scrollY / this.metrics.zoom,\r\n        x2: (this.metrics.width + this.metrics.scrollX) / this.metrics.zoom,\r\n        y2: (this.metrics.height + this.metrics.scrollY) / this.metrics.zoom\r\n      }\r\n\r\n      this.ctx.save()\r\n      // Очистка\r\n      this.ctx.fillStyle = '#ebf4ff'\r\n      this.ctx.fillRect(0, 0, this.metrics.width, this.metrics.height)\r\n      // scroll\r\n      this.ctx.translate(-this.metrics.scrollX, -this.metrics.scrollY)\r\n      // scale\r\n      this.ctx.scale(this.metrics.zoom, this.metrics.zoom)\r\n\r\n      // Метка времени, чтобы все элементы рассчитали анимацию относительно неё\r\n      const time = performance.now()\r\n      // Сортировка для рендера в порядке zIndex (todo нужно заранее готовить что рендерить и в каком порядке)\r\n      const sorted = this.elements.sort((a,b)=>{\r\n        if (a.zIndex > b.zIndex) return 1\r\n        if (a.zIndex < b.zIndex) return -1\r\n        return 0;\r\n      });\r\n\r\n      for (const element of sorted) {\r\n        // Анимация элемента\r\n        element.animate(time)\r\n        // Рисование элемента, если попадает в видимую область\r\n        if (element.isIntersectRect(viewRect)) {\r\n          this.ctx.save()\r\n          element.draw(this.ctx)\r\n          this.ctx.restore()\r\n        }\r\n      }\r\n      this.ctx.restore()\r\n      // Цикл рендера\r\n      requestAnimationFrame(this.draw)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Core","import React, {useEffect, useMemo, useRef} from 'react'\r\nimport Core from \"./core\"\r\nimport './style.css'\r\n\r\nfunction DrawLeaf() {\r\n\r\n  const dom = useRef<HTMLDivElement>(null)\r\n  const core = useMemo(() => new Core(), [])\r\n\r\n  useEffect(() => {\r\n    if (dom.current) core.mount(dom.current)\r\n    return () => core.unmount()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"Draw\" ref={dom}/>\r\n  )\r\n}\r\n\r\nexport default React.memo(DrawLeaf)","import {memo} from 'react'\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport PageLayout from \"@src/components/page-layout\"\r\nimport Head from \"@src/components/head\"\r\nimport Navigation from \"@src/containers/navigation\"\r\nimport LocaleSelect from \"@src/containers/locale-select\"\r\nimport TopHead from \"@src/containers/top-head\"\r\nimport DrawLeaf from '@src/components/draw-leaf'\r\n\r\nfunction LeafFall() {\r\n\r\n  const {t} = useTranslate();\r\n\r\n  return (\r\n    <PageLayout>\r\n      <TopHead/>\r\n      <Head title={t('menu.leaf')}>\r\n        <LocaleSelect/>\r\n      </Head>\r\n      <Navigation/>\r\n      <DrawLeaf/>\r\n    </PageLayout>\r\n  );\r\n}\r\n\r\nexport default memo(LeafFall)","import React, { memo, ReactNode } from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport './style.css'\r\n\r\ninterface IDrawingLayout {\r\n    children: ReactNode\r\n  }\r\n\r\nconst DrawingLayout: React.FC<IDrawingLayout> = ({children}) => {\r\n  const cn = bem('Drawing_layout')\r\n  return (\r\n    <div className={cn()}>\r\n        {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(DrawingLayout)","import { ICircle, IRectangle, ILine, IFreeDraw } from \"@src/store/canvas/types\"\r\n\r\ninterface AnimationParams {\r\n    update: (params: AnimationParamsObject) => void\r\n    render: (params: AnimationParamsObject) => void\r\n    clear: () => void\r\n}\r\n\r\ninterface AnimationParamsObject {\r\n    diff: number\r\n    timestamp: number\r\n    pTimestamp: number\r\n    fps: number\r\n    secondPart: number\r\n}\r\n\r\nclass Tool {\r\n  canvas: HTMLCanvasElement | null\r\n  ctx: CanvasRenderingContext2D | null\r\n  allFiguresTool: (ICircle | IRectangle | ILine | IFreeDraw)[] | null\r\n  animationId: any\r\n\r\n  constructor(canvas: HTMLCanvasElement | null) {\r\n    this.canvas = canvas\r\n    this.ctx = canvas ? canvas.getContext(\"2d\") : null\r\n    this.allFiguresTool = []\r\n    this.destroyEvents()\r\n    this.animationId\r\n  }\r\n\r\n  set fillColor(color: string | CanvasGradient | CanvasPattern) {\r\n    this.ctx && (this.ctx.fillStyle = color)\r\n  }\r\n  set strokeColor(color: string | CanvasGradient | CanvasPattern) {\r\n    this.ctx && (this.ctx.strokeStyle = color)\r\n  }\r\n\r\n  set lineWidth(width: number) {\r\n    this.ctx && (this.ctx.lineWidth = width)\r\n  }\r\n\r\n  destroyEvents() {\r\n    if (this.canvas) {\r\n      this.canvas.onmousemove = null\r\n      this.canvas.onmousedown = null\r\n      this.canvas.onmouseup = null\r\n    }\r\n  }\r\n\r\n  animation(params: AnimationParams) { // Объявление функции animation с параметром params\r\n\tconst { update, render, clear } = params // Деструктуризация параметра params для получения функций update, render и clear\r\n\tlet pTimestamp = 0 // Инициализация переменной pTimestamp, которая будет хранить предыдущее значение времени\r\n\r\n\tconst tick = (timestamp: number) => { // Объявление функции tick с параметром timestamp\r\n\t\tthis.animationId = requestAnimationFrame(tick) // Повторный вызов функции requestAnimationFrame с аргументом tick для обновления анимации\r\n        console.log('timestamp', timestamp)\r\n\r\n\t\tconst diff = timestamp - pTimestamp // Вычисление разницы между текущим и предыдущим временем анимации\r\n\t\tconst fps = 1000 / diff // Вычисление количества кадров в секунду (FPS) на основе разницы времени\r\n\t\tconst secondPart = diff / 1000 // Вычисление доли секунды, прошедшей с предыдущего кадра\r\n\t\tpTimestamp = timestamp // Обновление предыдущего времени до текущего\r\n\r\n\t\tconst params = { // Создание объекта params со значениями разницы времени, временных меток, FPS и доли секунды\r\n\t\t\tdiff,\r\n\t\t\ttimestamp,\r\n\t\t\tpTimestamp,\r\n\t\t\tfps,\r\n\t\t\tsecondPart,\r\n\t\t};\r\n\r\n\t\tupdate(params) // Вызов функции update с параметром params для обновления состояния анимации\r\n\t\tclear() // Вызов функции clear для очистки холста или экрана перед отрисовкой нового кадра\r\n\t\trender(params) // Вызов функции render с параметром params для отрисовки нового кадра анимации\r\n\t}\r\n\r\n    requestAnimationFrame(tick) // Вызов функции requestAnimationFrame с аргументом tick для запуска анимации\r\n}\r\n}\r\n\r\nexport default Tool\r\n","import { IFreeDraw } from \"@src/store/canvas/types\"\r\nimport Tool from \"../tool\"\r\n\r\nclass Brush extends Tool {\r\n    canvas!: HTMLCanvasElement | null // Ссылка на элемент canvas, к которому привязана кисть\r\n    mouseDown!: boolean // Флаг, указывающий, нажата ли кнопка мыши\r\n    figures: IFreeDraw | null\r\n\r\n    constructor(canvas: HTMLCanvasElement | null) {\r\n        super(canvas) // Вызываем конструктор родительского класса\r\n        this.listen() // Устанавливаем обработчики событий для рисования\r\n        this.figures = null\r\n    }\r\n    \r\n    listen() {\r\n       if(this.canvas) {\r\n        // Устанавливаем обработчики событий для перемещения, нажатия и отпускания кнопки мыши\r\n\r\n        // Использование .bind(this) в данном контексте гарантирует, что контекст (this) внутри обработчиков событий \r\n        // будет указывать на экземпляр класса Brush, а не на объект, на котором был вызван метод, \r\n        // который может измениться в зависимости от контекста вызова.\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n       }\r\n    }\r\n\r\n    // Обработчик события отпускания кнопки мыши\r\n    mouseUpHandler(e: MouseEvent) {\r\n        this.mouseDown = false\r\n        const allFigures = this.allFiguresTool as any\r\n        this.allFiguresTool = [...allFigures, this.figures]\r\n    }\r\n\r\n    // Обработчик события нажатия кнопки мыши\r\n    mouseDownHandler(e: MouseEvent) {\r\n        this.mouseDown = true // Устанавливаем флаг нажатия кнопки мыши в true\r\n        if(this.ctx && e.target instanceof HTMLElement) { // Проверяем наличие контекста рисования и что цель события является элементом HTML\r\n            this.ctx.beginPath() // Начинаем новый путь рисования\r\n            const rect = this.canvas!.getBoundingClientRect() // Получаем размеры и позицию холста\r\n            this.ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top) // Используем clientX и clientY относительно холста\r\n            const startPoint = { x: e.clientX - rect.left, y: e.clientY - rect.top }\r\n            this.figures = { type: 'freeDraw', points: [startPoint] }\r\n            // e.target && this.ctx.moveTo(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\r\n        }\r\n    }\r\n\r\n    // Обработчик события перемещения мыши\r\n    mouseMoveHandler(e: MouseEvent) {\r\n        if (this.mouseDown  && e.target instanceof HTMLElement) {\r\n            const rect = this.canvas!.getBoundingClientRect()\r\n            const currentPoint = { x: e.clientX - rect.left, y: e.clientY - rect.top }\r\n            this.figures && this.figures.points.push(currentPoint) // Добавляем текущую точку к массиву точек\r\n            this.draw(e.clientX - rect.left, e.clientY - rect.top) // Рисуем по указанным координатам\r\n            // this.draw(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop) \r\n        }\r\n    }\r\n\r\n    // Рисование на холсте\r\n   draw(x: number, y: number) {\r\n    if(this.ctx) { // Проверяем наличие контекста рисования\r\n      this.ctx.lineTo(x, y) // Проводим линию к указанным координатам\r\n      this.ctx.stroke() // Отрисовываем линию\r\n    }\r\n}\r\n}\r\n\r\nexport default Brush","import Tool from \"../tool\"\r\n// import { IRectangle } from \"@src/store/canvas/types\"\r\nimport { IRectangle } from \"@src/store/canvas/types\"\r\n\r\nclass Rectangle extends Tool {\r\n    canvas!: HTMLCanvasElement | null // Ссылка на элемент canvas, к которому привязана кисть\r\n    mouseDown!: boolean // Флаг, указывающий, нажата ли кнопка мыши\r\n    startX!: number\r\n    startY!: number\r\n    saved: any\r\n    rect: any\r\n    figures: IRectangle | null\r\n\r\n    constructor(canvas: HTMLCanvasElement | null) {\r\n        super(canvas) // Вызываем конструктор родительского класса\r\n        this.listen() // Устанавливаем обработчики событий для рисования\r\n        this.rect = null\r\n        this.figures = null\r\n    }\r\n    \r\n    listen() {\r\n       if(this.canvas) {\r\n        // Устанавливаем обработчики событий для перемещения, нажатия и отпускания кнопки мыши\r\n\r\n        // Использование .bind(this) в данном контексте гарантирует, что контекст (this) внутри обработчиков событий \r\n        // будет указывать на экземпляр класса Rectangle, а не на объект, на котором был вызван метод, \r\n        // который может измениться в зависимости от контекста вызова.\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n       }\r\n    }\r\n\r\n    // Обработчик события отпускания кнопки мыши\r\n    mouseUpHandler(e: MouseEvent) {\r\n        this.mouseDown = false\r\n        const allFigures = this.allFiguresTool as any\r\n        this.allFiguresTool = [...allFigures, this.figures]\r\n    }\r\n\r\n    // Обработчик события нажатия кнопки мыши\r\n    mouseDownHandler(e: MouseEvent) {\r\n        this.mouseDown = true // Устанавливаем флаг нажатия кнопки мыши в true\r\n        if(this.ctx && e.target instanceof HTMLElement) { // Проверяем наличие контекста рисования и что цель события является элементом HTML\r\n          this.ctx.beginPath() // Начинаем новый путь рисования\r\n          const rect = this.canvas!.getBoundingClientRect() // Получаем размеры и позицию холста\r\n        \r\n          // Получаем стартовые координаты по x и по y\r\n          this.startX = e.clientX - rect.left\r\n          this.startY = e.clientY - rect.top\r\n\r\n          // Сохранение изображения с canvas\r\n          this.saved = this.canvas!.toDataURL()\r\n        }\r\n    }\r\n\r\n    // Обработчик события перемещения мыши\r\n    mouseMoveHandler(e: MouseEvent) {\r\n        if (this.mouseDown  && e.target instanceof HTMLElement) {\r\n            const rect = this.canvas!.getBoundingClientRect()\r\n            let currentX = e.clientX - rect.left\r\n            let currentY = e.clientY - rect.top\r\n            let width = currentX - this.startX\r\n            let height = currentY - this.startY\r\n            this.figures = {\r\n                type: 'rectangle', \r\n                x: this.startX, \r\n                y: this.startY, \r\n                width: width, \r\n                height:height\r\n            }\r\n            this.draw(this.startX, this.startY, width, height) // Рисуем по указанным координатам\r\n        }\r\n    }\r\n\r\n    // Рисование на холсте\r\n   draw(x: number, y: number, w: number, h: number) {\r\n       const img = new Image()\r\n       img.src = this.saved\r\n      \r\n       // Сработает слушатель события onload в тот момент, когда изображение установилось\r\n      img.onload = () => {\r\n        this.ctx!.clearRect(0, 0, this.canvas!.width, this.canvas!.height) // Очистка canvas\r\n        this.ctx!.drawImage(img, 0, 0, this.canvas!.width, this.canvas!.height) // Вернули изображение, которое сохранили \r\n        this.ctx!.beginPath() // Начинаем рисовать новую фигуру\r\n        this.ctx!.rect(x, y, w, h)\r\n        this.ctx!.fill() // Заливка цветом\r\n        this.ctx!.stroke() // Добавляем обводку\r\n       }\r\n    }\r\n}\r\n\r\nexport default Rectangle","import Tool from \"../tool\"\r\nimport { ICircle } from \"@src/store/canvas/types\"\r\n\r\nclass Circle extends Tool {\r\n    canvas!: HTMLCanvasElement | null // Ссылка на элемент canvas\r\n    mouseDown!: boolean // Флаг, указывающий, нажата ли кнопка мыши\r\n    startX!: number\r\n    startY!: number\r\n    saved: any\r\n    figures: ICircle | null\r\n\r\n    constructor(canvas: HTMLCanvasElement | null) {\r\n        super(canvas) // Вызываем конструктор родительского класса\r\n        this.listen() // Устанавливаем обработчики событий для рисования\r\n        this.figures = null\r\n    }\r\n    \r\n    listen() {\r\n       if(this.canvas) {\r\n        // Устанавливаем обработчики событий для перемещения, нажатия и отпускания кнопки мыши\r\n\r\n        // Использование .bind(this) в данном контексте гарантирует, что контекст (this) внутри обработчиков событий \r\n        // будет указывать на экземпляр класса Rectangle, а не на объект, на котором был вызван метод, \r\n        // который может измениться в зависимости от контекста вызова.\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n       }\r\n    }\r\n\r\n    // Обработчик события отпускания кнопки мыши\r\n    mouseUpHandler(e: MouseEvent) {\r\n        this.mouseDown = false\r\n        const allFigures = this.allFiguresTool as any\r\n        this.allFiguresTool = [...allFigures, this.figures]\r\n    }\r\n\r\n    // Обработчик события нажатия кнопки мыши\r\n    mouseDownHandler(e: MouseEvent) {\r\n        this.mouseDown = true // Устанавливаем флаг нажатия кнопки мыши в true\r\n        if(this.ctx && e.target instanceof HTMLElement) { // Проверяем наличие контекста рисования и что цель события является элементом HTML\r\n            const canvasData = this.canvas!.toDataURL()\r\n            this.ctx.beginPath() // Начинаем новый путь рисования\r\n        \r\n            const rect = this.canvas!.getBoundingClientRect() // Получаем размеры и позицию холста\r\n        \r\n            this.startX = e.clientX - rect.left\r\n            this.startY = e.clientY - rect.top\r\n\r\n            this.saved = canvasData\r\n        }\r\n    }\r\n\r\n    // Обработчик события перемещения мыши\r\n    mouseMoveHandler(e: MouseEvent) {\r\n        if (this.mouseDown  && e.target instanceof HTMLElement) {\r\n            const rect = this.canvas!.getBoundingClientRect()\r\n            let currentX = e.clientX - rect.left\r\n            let currentY = e.clientY - rect.top\r\n            let width = currentX - this.startX\r\n            let height = currentY - this.startY\r\n            let radius = Math.sqrt(width**2 + height**2)\r\n            this.figures = {\r\n                type: 'circle', \r\n                x: this.startX, \r\n                y: this.startY, \r\n                radius: radius\r\n            }\r\n            this.draw(this.startX, this.startY, radius) \r\n        }\r\n    }\r\n\r\n    // Рисование на холсте\r\n   draw(x: number, y: number, radius: number) {\r\n       const img = new Image()\r\n       img.src = this.saved\r\n      \r\n       // Сработает слушатель события onload в тот момент, когда изображение установилось\r\n      img.onload = () => {\r\n        this.ctx!.clearRect(0, 0, this.canvas!.width, this.canvas!.height) // Очистка canvas\r\n        this.ctx!.drawImage(img, 0, 0, this.canvas!.width, this.canvas!.height) // Вернули изображение, которое сохранили \r\n        this.ctx!.beginPath() // Начинаем рисовать новую фигуру\r\n        this.ctx!.arc(x, y, radius, 0, 2*Math.PI) // Рисуем полный круг с центром в точке (x, y) и радиусом 'radius'\r\n        this.ctx!.fill() // Заливка цветом\r\n        this.ctx!.stroke() // Добавляем обводку\r\n    }\r\n}\r\n}\r\n\r\nexport default Circle","import Brush from \"../brush\"\r\n\r\nexport default class Eraser extends Brush {\r\n\r\n    constructor(canvas: HTMLCanvasElement | null) {\r\n        super(canvas)\r\n    }\r\n\r\n\r\n    draw(x: number, y: number) {\r\n\r\n        if(this.ctx) {\r\n          this.ctx.strokeStyle = \"white\"\r\n          this.ctx.lineTo(x, y)\r\n          this.ctx.stroke()\r\n        }\r\n    }\r\n}","import { ILine } from \"@src/store/canvas/types\"\r\nimport Tool from \"../tool\"\r\n\r\nclass Line extends Tool {\r\n    canvas!: HTMLCanvasElement | null \r\n    mouseDown!: boolean // Флаг, указывающий, нажата ли кнопка мыши\r\n    currentX!: number\r\n    currentY!: number\r\n    saved: any\r\n    figures: ILine | null\r\n\r\n    constructor(canvas: HTMLCanvasElement | null) {\r\n        super(canvas) // Вызываем конструктор родительского класса\r\n        this.listen() // Устанавливаем обработчики событий для рисования\r\n        this.figures = null\r\n    }\r\n    \r\n    listen() {\r\n       if(this.canvas) {\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n       }\r\n    }\r\n\r\n    // Обработчик события отпускания кнопки мыши\r\n    mouseUpHandler(e: MouseEvent) {\r\n        this.mouseDown = false\r\n        const allFigures = this.allFiguresTool as any\r\n        this.allFiguresTool = [...allFigures, this.figures]\r\n    }\r\n\r\n    // Обработчик события нажатия кнопки мыши\r\n    mouseDownHandler(e: MouseEvent) {\r\n        this.mouseDown = true \r\n        if(this.ctx && e.target instanceof HTMLElement) { \r\n          const rect = this.canvas!.getBoundingClientRect() // Получаем размеры и позицию холста\r\n          this.currentX = e.clientX - rect.left\r\n          this.currentY = e.clientY - rect.top\r\n          this.ctx.beginPath()\r\n          this.ctx.moveTo(this.currentX, this.currentY )\r\n          this.saved = this.canvas!.toDataURL()\r\n\r\n           // Сохраняем координаты линии\r\n           this.figures = {\r\n            type: 'line', \r\n            startX: this.currentX, \r\n            startY: this.currentY, \r\n            endX: this.currentX, \r\n            endY: this.currentY\r\n        }\r\n        }\r\n    }\r\n\r\n    // Обработчик события перемещения мыши\r\n    mouseMoveHandler(e: MouseEvent) {\r\n        if (this.mouseDown  && e.target instanceof HTMLElement) {\r\n            const rect = this.canvas!.getBoundingClientRect()\r\n            const newX = e.clientX - rect.left\r\n            const newY = e.clientY - rect.top\r\n            this.draw(newX, newY) // Рисуем по текущим координатам\r\n            // Обновляем конечные координаты линии\r\n            this.figures!.endX = newX\r\n            this.figures!.endY = newY\r\n        }\r\n    }\r\n\r\n    // Рисование на холсте\r\n   draw(x: number, y: number) {\r\n       const img = new Image()\r\n       img.src = this.saved\r\n      \r\n       // Сработает слушатель события onload в тот момент, когда изображение установилось\r\n      img.onload = () => {\r\n        this.ctx!.clearRect(0, 0, this.canvas!.width, this.canvas!.height) // Очистка canvas\r\n        this.ctx!.drawImage(img, 0, 0, this.canvas!.width, this.canvas!.height) // Вернули изображение, которое сохранили \r\n        this.ctx!.fillStyle = 'black'\r\n        this.ctx!.beginPath() // Начинаем рисовать новую линию\r\n        this.ctx!.moveTo(this.currentX, this.currentY)\r\n        this.ctx!.lineTo(x, y)\r\n        this.ctx!.fill()\r\n        this.ctx!.stroke()\r\n    }\r\n}\r\n}\r\n\r\nexport default Line","import Tool from '../tool'\r\nimport { ICircle, IRectangle, ILine, IFreeDraw, Shape } from '@src/store/canvas/types'\r\n\r\nclass Pointer extends Tool {\r\n    canvas!: HTMLCanvasElement | null // Ссылка на элемент canvas\r\n    mouseDown!: boolean // Флаг, указывающий, нажата ли кнопка мыши\r\n    startX!: number\r\n    startY!: number\r\n    selectedShape: Shape = null // Выбранная фигура для перемещения\r\n    shapes: (ICircle | IRectangle | ILine | IFreeDraw)[] | null // Массив фигур для отображения\r\n    selectedShapeStartX!: number\r\n    selectedShapeStartY!: number\r\n    selectedShapeEndX!: number\r\n    selectedShapeEndY!: number\r\n\r\n    constructor(canvas: HTMLCanvasElement | null, shapes: (ICircle | IRectangle | ILine | IFreeDraw)[] | null) {\r\n        super(canvas) // Вызываем конструктор родительского класса\r\n        this.shapes = shapes // Инициализируем массив фигур\r\n        this.listen() // Устанавливаем обработчики событий для перемещения фигур\r\n    }\r\n    \r\n    listen() {\r\n       if(this.canvas) {\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n       }\r\n    }\r\n\r\n    // Обработчик события отпускания кнопки мыши\r\n    mouseUpHandler(e: MouseEvent) {\r\n        this.mouseDown = false\r\n        this.selectedShape = null // Сбрасываем выбранную фигуру после отпускания кнопки мыши\r\n    }\r\n\r\n    // Обработчик события нажатия кнопки мыши\r\n    mouseDownHandler(e: MouseEvent) {\r\n        this.mouseDown = true\r\n        const rect = this.canvas!.getBoundingClientRect()\r\n        const mouseX = e.clientX - rect.left\r\n        const mouseY = e.clientY - rect.top\r\n        \r\n        // Проверяем, есть ли фигура в точке клика\r\n        this.selectedShape = this.getShapeAtPosition(mouseX, mouseY)\r\n        \r\n        if (this.selectedShape && this.selectedShape.type === 'line') {\r\n            this.startX = this.selectedShape.startX\r\n            this.startY = this.selectedShape.startY\r\n        } else {\r\n            this.startX = mouseX\r\n            this.startY = mouseY\r\n        }\r\n\r\n        // Если выбранная фигура - линия, сохраняем ее начальные координаты\r\n        if (this.selectedShape && this.selectedShape.type === 'line') {\r\n            this.selectedShapeStartX = this.selectedShape.startX\r\n            this.selectedShapeStartY = this.selectedShape.startY\r\n            this.selectedShapeEndX = this.selectedShape.endX\r\n            this.selectedShapeEndY = this.selectedShape.endY\r\n        }\r\n    }\r\n\r\n    // Обработчик события перемещения мыши\r\n    mouseMoveHandler(e: MouseEvent) {\r\n        if (this.mouseDown && this.selectedShape) {\r\n            const rect = this.canvas!.getBoundingClientRect()\r\n            const mouseX = e.clientX - rect.left\r\n            const mouseY = e.clientY - rect.top\r\n            \r\n            const deltaX = mouseX - this.startX\r\n            const deltaY = mouseY - this.startY\r\n\r\n             // Обновляем координаты \r\n             if(this.selectedShape.type === 'line') {\r\n                this.selectedShape.startX = this.selectedShapeStartX + deltaX\r\n                this.selectedShape.startY = this.selectedShapeStartY + deltaY\r\n                this.selectedShape.endX = this.selectedShapeEndX + deltaX\r\n                this.selectedShape.endY = this.selectedShapeEndY + deltaY\r\n             } else if (this.selectedShape.type === 'freeDraw') {\r\n                for (const point of this.selectedShape.points) {\r\n                    point.x += deltaX\r\n                    point.y += deltaY\r\n                }\r\n              } else {\r\n                const selected = this.selectedShape as any\r\n                selected.x += deltaX\r\n                selected.y += deltaY\r\n             }\r\n\r\n            // Перерисовываем холст\r\n            this.redrawCanvas()\r\n\r\n            // Обновляем начальные координаты\r\n            if (this.selectedShape && this.selectedShape.type !== 'line') {\r\n            this.startX = mouseX\r\n            this.startY = mouseY\r\n            }\r\n        }\r\n    }\r\n\r\n    redrawCanvas() {\r\n        if (!this.canvas || !this.ctx || !this.shapes) return\r\n        \r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height) // Очищаем холст\r\n        \r\n        // Перерисовываем все фигуры\r\n        for (const shape of this.shapes) {\r\n            if (shape.type === 'circle') {\r\n                this.ctx.beginPath()\r\n                this.ctx.arc(shape.x, shape.y, shape.radius, 0, 2 * Math.PI)\r\n                this.ctx.fill()\r\n                this.ctx.stroke()\r\n            }\r\n            if (shape.type === 'rectangle') {\r\n                this.ctx.beginPath()\r\n                this.ctx.rect(shape.x, shape.y, shape.width, shape.height)\r\n                this.ctx.fill()\r\n                this.ctx.stroke()\r\n            }\r\n            if (shape.type === 'line') {\r\n                this.ctx.beginPath()\r\n                this.ctx.moveTo(shape.startX, shape.startY)\r\n                this.ctx.lineTo(shape.endX, shape.endY)\r\n                this.ctx.stroke()\r\n            }\r\n            if(shape.type === 'freeDraw') {\r\n                if (shape.points.length > 1) {\r\n                    this.ctx.beginPath()\r\n                    this.ctx.moveTo(shape.points[0].x, shape.points[0].y)\r\n                    for (let i = 1; i < shape.points.length; i++) {\r\n                        this.ctx.lineTo(shape.points[i].x, shape.points[i].y)\r\n                    }\r\n                    this.ctx.stroke()\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Метод для определения фигуры в заданной точке\r\n    getShapeAtPosition(x: number, y: number) {\r\n        // Проходим по массиву фигур и проверяем, есть ли фигура в заданной точке\r\n        if(this.shapes) for (const shape of this.shapes) {\r\n            switch (shape.type) {\r\n                case 'circle':\r\n                    const distance = Math.sqrt((x - shape.x) ** 2 + (y - shape.y) ** 2)\r\n                    if (distance <= shape.radius) {\r\n                        return shape\r\n                    }\r\n                    break\r\n                case 'rectangle':\r\n                    if (x >= shape.x && x <= shape.x + shape.width && y >= shape.y && y <= shape.y + shape.height) {\r\n                        return shape\r\n                    }\r\n                    break\r\n                case 'line':\r\n\r\n                    // Проверяем, находится ли указатель мыши на линии\r\n                const distanceFromStart = Math.sqrt((x - shape.startX) ** 2 + (y - shape.startY) ** 2)\r\n                const distanceFromEnd = Math.sqrt((x - shape.endX) ** 2 + (y - shape.endY) ** 2)\r\n                const length = Math.sqrt((shape.startX - shape.endX) ** 2 + (shape.startY - shape.endY) ** 2)\r\n\r\n                // Проверяем, ближе ли указатель мыши к началу или концу линии, с учетом погрешности\r\n                const epsilon = 5 // погрешность\r\n                if (distanceFromStart + distanceFromEnd >= length - epsilon && distanceFromStart + distanceFromEnd <= length + epsilon) {\r\n                  return shape\r\n                }\r\n                      break;\r\n                case 'freeDraw':\r\n                    if (this.isPointInPath(x, y, shape.points)) {\r\n                         return shape\r\n                    }\r\n                      break\r\n                default:\r\n                    break\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n    // Метод для определения принадлежности точки пути (используется для freeDraw)\r\n    isPointInPath(x: number, y: number, points: { x: number, y: number }[]) {\r\n    \r\n    if (points.length < 2) return false\r\n\r\n    let inside = false\r\n    const epsilon = 1\r\n    for (let i = 0, j = points.length - 1; i < points.length; j = i++) {\r\n        const xi = points[i].x, yi = points[i].y\r\n        const xj = points[j].x, yj = points[j].y\r\n\r\n        // Добавляем погрешность к границам пути\r\n        const xiMin = Math.min(xi, xj) - epsilon\r\n        const xiMax = Math.max(xi, xj) + epsilon\r\n        const yiMin = Math.min(yi, yj) - epsilon\r\n        const yiMax = Math.max(yi, yj) + epsilon\r\n\r\n        // Проверяем, если точка (x, y) находится в окрестности линии\r\n        if (x >= xiMin && x <= xiMax && y >= yiMin && y <= yiMax) return true\r\n\r\n        // Проверяем, если точка (x, y) находится между точками i и j\r\n        const intersect = ((yi > y) !== (yj > y)) &&\r\n            (x < (xj - xi) * (y - yi) / (yj - yi) + xi)\r\n\r\n        // Инвертируем значение inside, если точка находится между точками i и j\r\n        if (intersect) inside = !inside\r\n\r\n        // Если точка совпадает с одной из точек пути, считаем ее внутри фигуры\r\n        if ((xi === x && yi === y) || (xj === x && yj === y)) return true\r\n    }\r\n\r\n    return inside\r\n    }\r\n}\r\n\r\nexport default Pointer","import { ICircle, IRectangle, ILine, IFreeDraw } from \"@src/store/canvas/types\"\r\nimport Pointer from \"../pointer\"\r\n\r\nexport default class Fall extends Pointer {\r\n\r\n    constructor(canvas: HTMLCanvasElement | null, shapes: (ICircle | IRectangle | ILine | IFreeDraw)[] | null) {\r\n        super(canvas, shapes)\r\n        this.startFallAnimation(); // Запускаем анимацию плавного падения фигур\r\n    }\r\n\r\n    startFallAnimation() {\r\n      this.animation({\r\n          update: (params) => {\r\n              this.fallFiguresSmoothly(params.secondPart) // Обновляем положение фигур с учетом времени\r\n          },\r\n          render: () => {\r\n              this.redrawCanvas() // Перерисовываем холст после обновления позиций фигур\r\n          },\r\n          clear: () => {\r\n            this.ctx!.clearRect(0, 0, this.canvas!.width, this.canvas!.height) // Очищаем холст перед отрисовкой нового кадра\r\n          },\r\n      });\r\n  }\r\n\r\n  // Метод для плавного падения всех фигур на canvas\r\n  fallFiguresSmoothly(timeFraction: number) {\r\n    console.log(\"this.shapes\", this.shapes)\r\n    if (!this.shapes) return;\r\n\r\n    this.shapes.forEach((figure) => {\r\n        \r\n      if (figure.type === \"rectangle\") {\r\n        const canvasBottom = this.canvas!.height - figure.height // Нижняя граница canvas для прямоугольника\r\n        if (figure.y < canvasBottom) {\r\n          figure.y += 1\r\n        }\r\n      }\r\n\r\n      if (figure.type === 'circle') {\r\n          const canvasBottom = this.canvas!.height - figure.radius // Нижняя граница canvas для круга\r\n          if (figure.y < canvasBottom) {\r\n            figure.y += 1 // Изменение координаты y для падения фигуры\r\n          }\r\n        }\r\n\r\n        if (figure.type === 'line') {\r\n          const canvasBottom = this.canvas!.height // Нижняя граница canvas для линии\r\n          if (figure.startY < canvasBottom && figure.endY < canvasBottom) {\r\n              figure.startY += 1 // Изменение координаты startY для падения линии\r\n              figure.endY += 1// Изменение координаты endY для падения линии\r\n          }\r\n        }\r\n\r\n        if (figure.type === 'freeDraw') {\r\n          // Находим максимальное значение y среди всех точек этой фигуры. \r\n          // Если максимальное значение y меньше нижней границы canvas, то фигура остается на месте. \r\n          // Если максимальное значение y превышает нижнюю границу canvas, то все точки фигуры сдвигаются вниз так, \r\n          // чтобы фигура оказалась на нижней границе canvas.\r\n          let maxY = -Infinity\r\n          for (const point of figure.points) {\r\n            if (point.y > maxY) {\r\n              maxY = point.y\r\n            }\r\n          }\r\n          const canvasBottom = this.canvas!.height\r\n          if (maxY < canvasBottom) {\r\n            // Сдвигаем все точки фигуры на deltaY\r\n            for (const point of figure.points) {\r\n              point.y += 1\r\n            }\r\n          }\r\n        }\r\n    })\r\n  }\r\n}","import React, {memo, useEffect, useState} from 'react'\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport { StoreState } from \"@src/store/types\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport './style.css'\r\nimport Brush from '../../tools/brush'\r\nimport Rectangle from '../../tools/rectangle'\r\nimport Circle from '../../tools/circle'\r\nimport Eraser from '../../tools/eraser'\r\nimport Line from '../../tools/line'\r\nimport Pointer from '../../tools/pointer'\r\nimport Fall from '../../tools/fall'\r\n\r\nconst Toolbar: React.FC = () => {\r\n\r\n    const store = useStore()\r\n    const cn = bem('Toolbar')\r\n\r\n    const [nameTool, setNameTool] = useState('freeDraw')\r\n\r\n    const select = useSelector((state: StoreState) => ({\r\n        canvas: state.canvas.canvas,\r\n        figures: state.canvas.figures,\r\n        tool: state.canvas.tool\r\n      }));\r\n\r\n    const changeColor = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      store.actions.canvas.setFillColor(e.target.value)\r\n      store.actions.canvas.setStrokeColor(e.target.value)\r\n    }\r\n\r\n    const download = () => {\r\n      const dataUrl = select.canvas!.toDataURL()\r\n      const a = document.createElement('a')\r\n      a.href = dataUrl\r\n      a.download = \"canvas.jpg\"\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      document.body.removeChild(a)\r\n  }\r\n\r\n  const onTool = (name: string) => {\r\n    if(nameTool === 'fall') {\r\n      const animationId = select.tool!.animationId\r\n      cancelAnimationFrame(animationId)\r\n    }\r\n    setNameTool(name)\r\n    store.actions.canvas.setFigures()\r\n    if(name === 'freeDraw') store.actions.canvas.setTool(new Brush(select.canvas), 'freeDraw')\r\n    if(name === 'rectangle') store.actions.canvas.setTool(new Rectangle(select.canvas), 'rectangle')\r\n    if(name === 'circle') store.actions.canvas.setTool(new Circle(select.canvas), 'circle')\r\n    if(name === 'eraser') store.actions.canvas.setTool(new Eraser(select.canvas), 'eraser')\r\n    if(name === 'line') {\r\n      store.actions.canvas.setTool(new Line(select.canvas), 'line')\r\n      store.actions.canvas.setStrokeColor('black')\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(select.figures.length > 0 && nameTool === \"pointer\") store.actions.canvas.setTool(new Pointer(select.canvas, select.figures), 'pointer')\r\n    if(select.figures.length > 0 && nameTool === \"fall\") store.actions.canvas.setTool(new Fall(select.canvas, select.figures), 'fall')\r\n  }, [select.figures])\r\n\r\n    return (\r\n      <div className={cn()}>\r\n            <span>Инструменты</span>\r\n            <button className={cn('btn', {brush: true})} onClick={() => onTool('freeDraw')}/>\r\n            <button className={cn('btn', {rect: true})} onClick={() => onTool('rectangle')}/>\r\n            <button className={cn('btn', {circle: true})} onClick={() => onTool('circle')}/>\r\n            <button className={cn('btn', {eraser: true})} onClick={() => onTool('eraser')}/>\r\n            <button className={cn('btn', {line: true})} onClick={() => onTool('line')}/>\r\n            <input  className={cn('btn', {color: true})} onChange={e => changeColor(e)} style={{marginLeft:10}} type=\"color\"/>\r\n            <button className={cn('btn', {pointer: true})} onClick={() => onTool('pointer')}/>\r\n            <button className={cn('btn', {arrow: true})} onClick={() => onTool('fall')}/>\r\n            <button className={cn('btn', {undo: true})} onClick={() => store.actions.canvas.undo()}/>\r\n            <button className={cn('btn', {redo: true})} onClick={() => store.actions.canvas.redo()}/>\r\n            <button className={cn('btn', {save: true})}  onClick={() => download()}/>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default memo(Toolbar)\r\n\r\n\r\n","import React, { memo, useEffect, useState } from \"react\"\r\nimport { cn as bem } from \"@bem-react/classname\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport \"./style.css\"\r\nimport Tool from \"../../tools/tool\"\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport { StoreState } from \"@src/store/types\"\r\nimport Fall from \"../../tools/fall\"\r\n\r\nconst SettingBar: React.FC = () => {\r\n  const cn = bem(\"Setting_bar\")\r\n\r\n  const store = useStore()\r\n\r\n  return (\r\n    <div className={cn()}>\r\n      <label htmlFor=\"line-width\">Толщина линии</label>\r\n      <input\r\n        className={cn('input')}\r\n        onChange={(e) => store.actions.canvas.setLineWidth(Number(e.target.value))}\r\n        id=\"line-width\"\r\n        type=\"number\"\r\n        defaultValue={1}\r\n        min={1}\r\n        max={50}\r\n      />\r\n      <label htmlFor=\"stroke-color\">Цвет обводки</label>\r\n      <input\r\n        className={cn('input', {color: true})}\r\n        onChange={(e) => store.actions.canvas.setStrokeColor(e.target.value)}\r\n        id=\"stroke-color\"\r\n        type=\"color\"\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(SettingBar)\r\n","import React, { memo, useEffect, useRef } from \"react\"\r\nimport {cn as bem} from '@bem-react/classname'\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport useStore from \"@src/hooks/use-store\" \r\nimport './style.css'\r\nimport Brush from \"../../tools/brush\"\r\nimport Rectangle from \"../../tools/rectangle\"\r\nimport { StoreState } from \"@src/store/types\"\r\n\r\nconst Canvas: React.FC = () => {\r\n\r\n  const canvasRef = useRef<HTMLCanvasElement | null>(null)\r\n  const store = useStore()\r\n  const cn = bem('Canvas')\r\n\r\n  const select = useSelector((state: StoreState) => ({\r\n    figures: state.canvas.tool\r\n  }));\r\n\r\n  const mouseDownHandler = () => {\r\n    if(canvasRef.current) {\r\n      // const rect = canvasRef.current.getBoundingClientRect()\r\n      // console.log('rect', rect)\r\n      store.actions.canvas.pushToUndo(canvasRef.current.toDataURL())\r\n      //  const rectangle = Rectangle\r\n      //  console.log(rectangle.prototype)\r\n    }\r\n}\r\n\r\n  useEffect(() => {\r\n    canvasRef.current && store.actions.canvas.setCannvas(canvasRef.current)\r\n    store.actions.canvas.setTool(new Brush(canvasRef.current), 'freeDraw')\r\n  }, [])\r\n\r\n  return (\r\n    <div className={cn()}>\r\n        <canvas onMouseDown={() => mouseDownHandler()} width={600} height={400} ref={canvasRef}></canvas>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(Canvas)\r\n","import {memo} from 'react'\r\nimport useTranslate from \"@src/hooks/use-translate\"\r\nimport PageLayout from \"@src/components/page-layout\"\r\nimport Head from \"@src/components/head\"\r\nimport Navigation from \"@src/containers/navigation\"\r\nimport LocaleSelect from \"@src/containers/locale-select\"\r\nimport TopHead from \"@src/containers/top-head\"\r\nimport DrawingLayout from './components/drawing-layout'\r\nimport Toolbar from './components/toolbar'\r\nimport SettingBar from './components/setting-bar'\r\nimport Canvas from './components/canvas'\r\n\r\nfunction Drawing() {\r\n\r\n  const {t} = useTranslate();\r\n\r\n  return (\r\n    <PageLayout>\r\n      <TopHead/>\r\n      <Head title={t('menu.drawing')}>\r\n        <LocaleSelect/>\r\n      </Head>\r\n      <Navigation/>\r\n      <DrawingLayout>\r\n        <Toolbar/>\r\n        <SettingBar/>\r\n        <Canvas/>\r\n      </DrawingLayout>\r\n    </PageLayout>\r\n  );\r\n}\r\n\r\nexport default memo(Drawing)","import {useCallback, useContext, useEffect, useState} from 'react'\r\nimport {Routes, Route} from 'react-router-dom'\r\nimport useSelector from \"@src/hooks/use-selector\"\r\nimport useStore from \"@src/hooks/use-store\"\r\nimport useInit from \"@src/hooks/use-init\"\r\nimport Main from \"./main\"\r\nimport Basket from \"./modals/basket\"\r\nimport Article from \"./article\"\r\nimport Login from \"./login\"\r\nimport Profile from \"./profile\"\r\nimport Protected from \"@src/containers/protected\"\r\nimport Modals from '@src/containers/modals'\r\nimport Chat from './chat'\r\nimport LeafFall from './leaf-fall'\r\nimport Drawing from './drawing'\r\nimport {useSelector as useSelectorRedux} from 'react-redux'\r\n\r\n/**\r\n * Приложение\r\n * @returns {React.ReactElement}\r\n */\r\nfunction App({goods}: {goods: any}) {\r\n\r\n  const store = useStore()\r\n  useInit(async () => {\r\n    await store.actions.session.remind()\r\n  })\r\n\r\n  const activeModal = useSelectorRedux((state: any) => state.modals.activeModal);\r\n\r\n  return (\r\n    <>\r\n      <Routes>\r\n        <Route path={''} element={<Main goods={goods}/>}/>\r\n        <Route path={'/articles/:id'} element={<Article/>}/>\r\n        <Route path={\"/login\"} element={<Login/>}/>\r\n        <Route path={\"/leaf\"} element={<LeafFall/>}/>\r\n        <Route path={\"/drawing\"} element={<Drawing/>}/>\r\n        <Route path={\"/profile\"} element={<Protected redirect='/login'><Profile/></Protected>}/>\r\n        <Route path={\"/chat\"} element={<Protected redirect='/login'><Chat/></Protected>}/>\r\n      </Routes>\r\n\r\n      {activeModal && <Modals/>}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import type { IConfig } from \"../config\"\r\nimport Services from \"../services\"\r\nimport type { RequestArgs, ResponseApi } from \"./types\";\r\n\r\nclass APIService {\r\n  services: Services;\r\n  config: IConfig[\"api\"];\r\n  defaultHeaders: Record<string, string>;\r\n\r\n  /**\r\n   * @param services {Services} Менеджер сервисов\r\n   * @param config {Object}\r\n   */\r\n  constructor(services: Services, config: IConfig[\"api\"] = {} as IConfig[\"api\"]) {\r\n    this.services = services;\r\n    this.config = config;\r\n    this.defaultHeaders = {\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n  }\r\n\r\n  /**\r\n   * HTTP запрос\r\n   * @param url\r\n   * @param method\r\n   * @param headers\r\n   * @param options\r\n   * @returns {Promise<{}>}\r\n   */\r\n  async request<T>({\r\n    url,\r\n    method = \"GET\",\r\n    headers = {},\r\n    ...options\r\n  }: RequestArgs): Promise<ResponseApi<T>> {\r\n    if (!url.match(/^(http|\\/\\/)/)) url = this.config.baseUrl + url;\r\n    const res = await fetch(url, {\r\n      method,\r\n      headers: { ...this.defaultHeaders, ...headers },\r\n      ...options,\r\n    });\r\n    return { data: await res.json() as T, status: res.status, headers: res.headers as any };\r\n  }\r\n\r\n  /**\r\n   * Установка или сброс заголовка\r\n   * @param name {String} Название заголовка\r\n   * @param value {String|null} Значение заголовка\r\n   */\r\n  setHeader(name: string, value: string | null = null) {\r\n    if (value) {\r\n      this.defaultHeaders[name] = value;\r\n    } else if (this.defaultHeaders[name]) {\r\n      delete this.defaultHeaders[name];\r\n    }\r\n  }\r\n}\r\n\r\nexport default APIService;\r\n","import type { IConfig } from \"../config\"\r\nimport Services from \"../services\"\r\n\r\nclass WebSocketService {\r\n    services: Services\r\n    config: IConfig[\"socket\"]\r\n    socket?: WebSocket\r\n  \r\n    constructor(services: Services, config: IConfig[\"socket\"] = {} as IConfig[\"socket\"]) {\r\n      this.services = services;\r\n      this.config = config;\r\n    }\r\n  \r\n    /**\r\n     * Установка WebSocket соединения\r\n     * @param url Адрес WebSocket сервера\r\n     * @param protocols Протоколы, поддерживаемые сервером\r\n     */\r\n    connect(url: string): void {\r\n      const fullUrl = this.getWebSocketUrl(url);\r\n      this.socket = new WebSocket(fullUrl);\r\n    }\r\n  \r\n    /**\r\n     * Отправка данных по WebSocket соединению\r\n     * @param data Данные для отправки\r\n     */\r\n    send(method: string, payload: Record<string, string>): void {\r\n        const data = JSON.stringify({\r\n            method,\r\n            payload: {\r\n              ...payload\r\n            }\r\n          })\r\n\r\n      if (this.socket) {\r\n        this.socket.send(data);\r\n      } else {\r\n        console.error(\"WebSocket connection is not open.\");\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * Закрытие WebSocket соединения\r\n     * @param code Код закрытия\r\n     * @param reason Причина закрытия\r\n     */\r\n    close(code?: number, reason?: string): void {\r\n      if (this.socket && this.socket.readyState === WebSocket.OPEN) {\r\n        this.socket.close()\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * Получение полного URL для WebSocket соединения\r\n     * @param url Адрес WebSocket сервера\r\n     * @returns Полный URL\r\n     */\r\n    private getWebSocketUrl(url: string): string {\r\n      if (!url.match(/^(ws|wss|\\/\\/)/)) {\r\n        return (this.config.baseUrl || \"ws://\") + url;\r\n      }\r\n      return url;\r\n    }\r\n  }\r\n\r\n  export default WebSocketService;","import { IConfig } from \"../config.js\"\r\nimport Store from \"./index.js\" \r\nimport Services from \"../services.js\"\r\nimport type { StoreState, IKeysModules } from \"./types.js\"\r\n\r\n\r\n/**\r\n * Базовый класс для модулей хранилища\r\n * Для группировки действий над внешним состоянием\r\n */\r\n// export type StoreNames = keyof StoreState | keyof IConfig[\"store\"][\"modules\"];\r\n\r\nclass StoreModule<State, Config = object> {\r\n  store: Store\r\n  name: IKeysModules\r\n  config: Config\r\n  services: Services\r\n\r\n  /**\r\n   * @param store {Store}\r\n   * @param name {String}\r\n   * @param [config] {Object}\r\n   */\r\n  constructor(\r\n    store: Store,\r\n    name: IKeysModules,\r\n    config: Config | {} = {} \r\n  ) {\r\n    this.store = store\r\n    this.name = name\r\n    this.config = config as Config \r\n    /** @type {Services} */\r\n    this.services = store.services\r\n  }\r\n\r\n  initState(): State {\r\n    return {} as State;\r\n  }\r\n\r\n  initConfig(): Config {\r\n    return {} as Config;\r\n  }\r\n\r\n\r\n  getState() {\r\n    return this.store.getState()[this.name] as State;\r\n  }\r\n\r\n  setState(newState: State, description: string = \"setState\") {\r\n    this.store.setState(\r\n      {\r\n        ...this.store.getState(),\r\n        [this.name]: newState,\r\n      },\r\n      description\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default StoreModule;\r\n","import StoreModule from \"../module\"\r\nimport { IBasketItem, ISelectedItem, IinitState, IApiResponse } from \"./types\"\r\n\r\n/**\r\n * Покупательская корзина\r\n */\r\nclass BasketState extends StoreModule<IinitState> {\r\n  initState(): IinitState {\r\n    return {\r\n      list: [],\r\n      sum: 0,\r\n      amount: 0,\r\n      quantity: 0,\r\n      selected: [],\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Добавление товара в корзину\r\n   * @param _id {String} Код товара\r\n   */\r\n  async addToBasket(_id: string, amountGoods?: number) {\r\n    let sum = 0\r\n    // Ищем товар в корзине, чтобы увеличить его количество\r\n    let exist = false\r\n    const list: IBasketItem[] = this.getState().list.map(\r\n      (item: IBasketItem) => {\r\n        let result = item\r\n        if (item._id === _id) {\r\n          exist = true; // Запомним, что был найден в корзине\r\n          amountGoods\r\n            ? (result = { ...item, amount: item.amount + amountGoods })\r\n            : (result = { ...item, amount: item.amount + 1 })\r\n        }\r\n        sum += result.price * result.amount\r\n        return result\r\n      }\r\n    )\r\n\r\n    if (!exist) {\r\n      // Поиск товара в каталоге, чтобы его добавить в корзину.\r\n      const res: IApiResponse = await this.services.api.request({\r\n        url: `/api/v1/articles/${_id}`,\r\n      })\r\n      const item = res.data.result\r\n\r\n      list.push({ ...item, amount: amountGoods ? amountGoods : 1 }) // list уже новый, в него можно пушить.\r\n      // Добавляем к сумме.\r\n      amountGoods ? (sum += item.price * amountGoods) : (sum += item.price)\r\n    }\r\n    this.setState(\r\n      {\r\n        ...this.getState(),\r\n        list,\r\n        sum,\r\n        amount: list.length,\r\n        quantity: 0,\r\n      },\r\n      \"Добавление в корзину\"\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Удаление товара из корзины\r\n   * @param _id Код товара\r\n   */\r\n  removeFromBasket(_id: string) {\r\n    let sum = 0\r\n    const list = this.getState().list.filter((item: IBasketItem) => {\r\n      if (item._id === _id) return false\r\n      sum += item.price * item.amount\r\n      return true\r\n    });\r\n\r\n    this.setState(\r\n      {\r\n        ...this.getState(),\r\n        list,\r\n        sum,\r\n        amount: list.length,\r\n      },\r\n      \"Удаление из корзины\"\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Добавление результата модального окна с количеством товара\r\n   * @param quantity {Number}\r\n   */\r\n  updateQuantityProduct(quantity: number) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      quantity,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Добавление объекта в selected\r\n   * @param {Array}\r\n   */\r\n  updateSelected(selectedId: string) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      selected: [\r\n        ...this.getState().selected,\r\n        {\r\n          id: selectedId,\r\n          quantity: this.getState().quantity,\r\n        },\r\n      ],\r\n      quantity: 0,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Удаление объекта из selected\r\n   * @param _id Код товара\r\n   */\r\n  removeFromSelected(id: string) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      selected: this.getState().selected.filter(\r\n        (item: ISelectedItem) => item.id !== id\r\n      ),\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Добавление выбранных товаров из модального окна\r\n   * @param {}\r\n   */\r\n  async addingSelectedProducts() {\r\n    const selected = this.getState().selected\r\n\r\n    if (selected.length === 0) {\r\n      return\r\n    }\r\n\r\n    // Получаем первый объект из массива и удаляем его из массива\r\n    const firstSelected = selected.shift()\r\n\r\n    // Добавляем товар в корзину\r\n    if(firstSelected) await this.addToBasket(firstSelected.id, firstSelected.quantity)\r\n\r\n    // Рекурсивно вызываем эту же функцию для оставшихся объектов\r\n    await this.addingSelectedProducts()\r\n\r\n    // })\r\n  }\r\n}\r\n\r\nexport default BasketState\r\n","/**\r\n * Проверка, значение - простой объект\r\n * @param value\r\n * @returns {boolean}\r\n */\r\nexport default function isPlainObject(value) {\r\n  return value && (!value.__proto__ || Object.getPrototypeOf(value).constructor.name === 'Object');\r\n}\r\n","import isPlainObject from '../is-plain-object'\r\n\r\n/**\r\n * Возвращает объект, в котором не будет совпадений со вторым объектом\r\n * @param objectSrc {Object} Исходный объект\r\n * @param objectExc {Object} Объект-маска, вырезаемый из objectSrc\r\n * @returns {Object} Новый объект\r\n */\r\nexport default function exclude(objectSrc, objectExc) {\r\n  if (isPlainObject(objectSrc) && isPlainObject(objectExc)) {\r\n    const result = {};\r\n    const keys = Object.keys(objectSrc);\r\n    for (const key of keys) {\r\n      if (objectSrc[key] !== objectExc[key]) {\r\n        const value = exclude(objectSrc[key], objectExc[key])\r\n        if (typeof value !== \"undefined\") {\r\n          result[key] = value;\r\n        }\r\n      }\r\n    }\r\n    return Object.keys(result).length ? result : undefined;\r\n  } else {\r\n    return objectSrc;\r\n  }\r\n}\r\n\r\n","import StoreModule from \"../module\"\r\nimport exclude from \"@src/utils/exclude\"\r\nimport { IIinitCatalogState, IValidParams, ISelected, IApiResponseCatalog, IParams } from \"./types\"\r\n\r\n/**\r\n * Состояние каталога - параметры фильтра исписок товара\r\n */\r\nclass CatalogState extends StoreModule<IIinitCatalogState> {\r\n  /**\r\n   * Начальное состояние\r\n   * @return {Object}\r\n   */\r\n  initState(): IIinitCatalogState {\r\n    return {\r\n      list: [],\r\n      params: {\r\n        page: 1,\r\n        limit: 10,\r\n        sort: \"order\",\r\n        query: \"\",\r\n        category: \"\",\r\n        madeIn: \"\"\r\n      },\r\n      count: 0,\r\n      waiting: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Инициализация параметров.\r\n   * Восстановление из адреса\r\n   * @param [newParams] {Object} Новые параметры\r\n   * @return {Promise<void>}\r\n   */\r\n  async initParams(newParams: object = {}): Promise<void> {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    let validParams: IValidParams = {};\r\n    if (urlParams.has(\"page\"))\r\n      validParams.page = Number(urlParams.get(\"page\")) || 1;\r\n    if (urlParams.has(\"limit\"))\r\n      validParams.limit = Math.min(Number(urlParams.get(\"limit\")) || 10, 50);\r\n    if (urlParams.has(\"sort\")) validParams.sort = urlParams.get(\"sort\");\r\n    if (urlParams.has(\"query\")) validParams.query = urlParams.get(\"query\");\r\n    if (urlParams.has(\"category\"))\r\n      validParams.category = urlParams.get(\"category\");\r\n      if (urlParams.has(\"madeIn\"))\r\n      validParams.madeIn = urlParams.get(\"madeIn\");\r\n    await this.setParams(\r\n      { ...this.initState().params, ...validParams, ...newParams },\r\n      true\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Сброс параметров к начальным\r\n   * @param [newParams] {Object} Новые параметры\r\n   * @return {Promise<void>}\r\n   */\r\n  async resetParams(newParams: object = {}): Promise<void> {\r\n    // Итоговые параметры из начальных, из URL и из переданных явно\r\n    const params = { ...this.initState().params, ...newParams };\r\n    // Установка параметров и загрузка данных\r\n    await this.setParams(params);\r\n  }\r\n\r\n  /**\r\n   * Установка параметров и загрузка списка товаров\r\n   * @param [newParams] {Object} Новые параметры\r\n   * @param [replaceHistory] {Boolean} Заменить адрес (true) или новая запись в истории браузера (false)\r\n   * @returns {Promise<void>}\r\n   */\r\n  async setParams(\r\n    newParams: object = {},\r\n    replaceHistory: boolean = false,\r\n    hide = false,\r\n    selected: ISelected[] = []\r\n  ): Promise<void> {\r\n    const params: IParams = { ...this.getState().params, ...newParams }\r\n\r\n    // Установка новых параметров и признака загрузки\r\n    this.setState(\r\n      {\r\n        ...this.getState(),\r\n        params,\r\n        waiting: true,\r\n      },\r\n      \"Установлены параметры каталога\"\r\n    );\r\n\r\n    // Сохранить параметры в адрес страницы\r\n    let urlSearch = new URLSearchParams(\r\n      exclude(params, this.initState().params)\r\n    ).toString();\r\n    const url =\r\n      window?.location.pathname +\r\n      (urlSearch ? `?${urlSearch}` : \"\") +\r\n      window?.location.hash;\r\n\r\n    if (!hide) {\r\n      if (replaceHistory) {\r\n        window?.history.replaceState({}, \"\", url);\r\n      } else {\r\n        window?.history.pushState({}, \"\", url);\r\n      }\r\n    }\r\n\r\n    const apiParams = exclude(\r\n      {\r\n        limit: params.limit,\r\n        skip: (params.page - 1) * params.limit,\r\n        fields: \"items(*),count\",\r\n        sort: params.sort,\r\n        \"search[query]\": params.query,\r\n        \"search[category]\": params.category,\r\n        \"search[madeIn]\": params.madeIn\r\n      },\r\n      {\r\n        skip: 0,\r\n        \"search[query]\": \"\",\r\n        \"search[category]\": \"\",\r\n        \"search[madeIn]\": \"\"\r\n      }\r\n    )\r\n\r\n    const res: IApiResponseCatalog = await this.services.api.request({\r\n      url: `/api/v1/articles?${new URLSearchParams(apiParams)}`,\r\n    });\r\n\r\n    if (selected.length > 0) {\r\n      res.data.result.items.map((product) => {\r\n        const filteredProduct = selected.some(\r\n          (item) => product._id === item.id\r\n        );\r\n\r\n        if (filteredProduct) {\r\n          return (product.selectedGoods = true);\r\n        } else {\r\n          return product;\r\n        }\r\n      });\r\n    }\r\n\r\n    this.setState(\r\n      {\r\n        ...this.getState(),\r\n        list: res.data.result.items,\r\n        count: res.data.result.count,\r\n        waiting: false,\r\n      },\r\n      \"Загружен список товаров из АПИ\"\r\n    );\r\n  }\r\n}\r\n\r\nexport default CatalogState;\r\n","import StoreModule from \"../module\"\r\n\r\nexport interface IModalsInitState {\r\n  name: string | null\r\n}\r\n\r\nclass ModalsState extends StoreModule<IModalsInitState> {\r\n\r\n  initState(): IModalsInitState {\r\n    return {\r\n      name: null\r\n    }\r\n  }\r\n\r\n  open(name: string){\r\n    this.setState({name}, `Открытие модалки ${name}`);\r\n  }\r\n\r\n  close(){\r\n    this.setState({name: null}, `Закрытие модалки`);\r\n  }\r\n}\r\n\r\nexport default ModalsState;\r\n","import StoreModule from \"../module\"\r\nimport type { ResponseData, InitialStateArticle } from \"./types\"\r\n\r\n/**\r\n * Детальная ифнормация о товаре для страницы товара\r\n */\r\nclass ArticleState extends StoreModule<InitialStateArticle> {\r\n\r\n  initState(): InitialStateArticle {\r\n    return {\r\n      data: {},\r\n      waiting: false // признак ожидания загрузки\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Загрузка товаров по id\r\n   * @param id {String}\r\n   * @return {Promise<void>}\r\n   */\r\n  async load(id: string): Promise<void> {\r\n    // Сброс текущего товара и установка признака ожидания загрузки\r\n    this.setState({\r\n      data: {},\r\n      waiting: true\r\n    });\r\n    try {\r\n      const res = await this.services.api.request<ResponseData>({\r\n        url: `/api/v1/articles/${id}?fields=*,madeIn(title,code),category(title)`\r\n      });\r\n\r\n      // Товар загружен успешно\r\n      this.setState({\r\n        data: res.data.result,\r\n        waiting: false\r\n      }, 'Загружен товар из АПИ');\r\n\r\n    } catch (e) {\r\n      // Ошибка при загрузке\r\n      // @todo В стейт можно положить информацию об ошибке\r\n      this.setState({\r\n        data: {},\r\n        waiting: false\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default ArticleState;\r\n","import StoreModule from \"../module\"\r\n\r\nexport interface ILocaleInitState {\r\n  lang: 'ru' | 'en'\r\n}\r\n\r\nclass LocaleState extends StoreModule<ILocaleInitState> {\r\n\r\n  initState(): ILocaleInitState {\r\n    return {\r\n      lang: 'ru'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Установка кода языка (локали)\r\n   * @param lang\r\n   */\r\n  setLang(lang: 'ru' | 'en') {\r\n    this.setState({lang}, 'Установлена локаль');\r\n  }\r\n}\r\n\r\nexport default LocaleState;\r\n","import StoreModule from \"../module\"\r\nimport { ICategoriesInitState, IApiResponseCategory } from \"./types\"\r\n\r\n/**\r\n * Список категорий\r\n */\r\nclass CategoriesState extends StoreModule<ICategoriesInitState> {\r\n\r\n  /**\r\n   * Начальное состояние\r\n   * @return {Object}\r\n   */\r\n  initState(): ICategoriesInitState {\r\n    return {\r\n      list: [],\r\n      waiting: false\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Загрузка списка товаров\r\n   */\r\n  async load() {\r\n    this.setState({...this.getState(), waiting: true}, 'Ожидание загрузки категорий');\r\n\r\n    const res: IApiResponseCategory = await this.services.api.request({\r\n      url: `/api/v1/categories?fields=_id,title,parent(_id)&limit=*`\r\n    })\r\n    // Товар загружен успешно\r\n    this.setState({\r\n      ...this.getState(),\r\n      list: res.data.result.items,\r\n      waiting: false\r\n    }, 'Категории загружены');\r\n  }\r\n\r\n}\r\n\r\nexport default CategoriesState;\r\n","export default function simplifyErrors(issues = {}) {\r\n  const result = {};\r\n  for (const issue of issues) {\r\n    const key = issue.path.join('.') || 'other';\r\n    if (result[key]) {\r\n      result[key].push(issue.message);\r\n    } else {\r\n      result[key] = [issue.message]\r\n    }\r\n  }\r\n  return result;\r\n}\r\n","import StoreModule from \"../module\"\r\nimport simplifyErrors from \"@src/utils/simplify-errors\"\r\nimport { ISessionInitState, IResponseDataSession, IResponseSessionRemind, InitConfigSession } from \"./types\"\r\nimport { IConfig } from \"@src/config\"\r\n\r\n/**\r\n * Сессия\r\n */\r\nclass SessionState extends StoreModule<ISessionInitState, InitConfigSession> {\r\n  // config!: IConfig[\"store\"][\"modules\"][\"session\"]\r\n  /**\r\n   * Начальное состояние\r\n   * @return {Object}\r\n   */\r\n  initState(): ISessionInitState {\r\n    return {\r\n      user: {},\r\n      token: null,\r\n      errors: null,\r\n      waiting: true,\r\n      exists: false\r\n    };\r\n  }\r\n\r\n  initConfig(): InitConfigSession {\r\n    return {} as InitConfigSession\r\n  }\r\n  \r\n  /**\r\n   * Авторизация (вход)\r\n   * @param data\r\n   * @param onSuccess\r\n   * @returns Promise<void>\r\n   */\r\n  async signIn(data: {login: string, password: string}, onSuccess: () => void) {\r\n    this.setState(this.initState(), 'Авторизация');\r\n    try {\r\n      const res = await this.services.api.request<IResponseDataSession>({\r\n        url: '/api/v1/users/sign',\r\n        method: 'POST',\r\n        body: JSON.stringify(data)\r\n      });\r\n\r\n      if (!res.data.error) {\r\n        this.setState({\r\n          ...this.getState(),\r\n          token: res.data.result!.token,\r\n          user: res.data.result!.user,\r\n          exists: true,\r\n          waiting: false\r\n        }, 'Успешная авторизация');\r\n\r\n        // Запоминаем токен, чтобы потом автоматически аутентифицировать юзера\r\n        window?.localStorage.setItem('token', res.data.result!.token);\r\n\r\n        // Устанавливаем токен в АПИ\r\n        this.services.api.setHeader(this.config.tokenHeader, res.data.result!.token);\r\n\r\n        if (onSuccess) onSuccess();\r\n      } else {\r\n        this.setState({\r\n          ...this.getState(),\r\n          errors: simplifyErrors(res.data.error.data.issues),\r\n          waiting: false\r\n        }, 'Ошибка авторизации');\r\n      }\r\n\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Отмена авторизации (выход)\r\n   * @returns Promise<void>\r\n   */\r\n  async signOut() {\r\n    try {\r\n      await this.services.api.request({\r\n        url: '/api/v1/users/sign',\r\n        method: 'DELETE'\r\n      });\r\n      // Удаляем токен\r\n      window?.localStorage.removeItem('token');\r\n      // Удаляем заголовок\r\n      this.services.api.setHeader(this.config.tokenHeader, null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n    this.setState({...this.initState(), waiting: false});\r\n  }\r\n\r\n  /**\r\n   * По токену восстановление сессии\r\n   * @return {Promise<void>}\r\n   */\r\n  async remind() {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      // Устанавливаем токен в АПИ\r\n      this.services.api.setHeader(this.config.tokenHeader, token);\r\n      // Проверяем токен выбором своего профиля\r\n      const res = await this.services.api.request<IResponseSessionRemind>({url: '/api/v1/users/self'});\r\n\r\n      if (res.data.error) {\r\n        // Удаляем плохой токен\r\n        window?.localStorage.removeItem('token');\r\n        this.services.api.setHeader(this.config.tokenHeader, null);\r\n        this.setState({\r\n          ...this.getState(), exists: false, waiting: false\r\n        }, 'Сессии нет');\r\n      } else {\r\n        this.setState({\r\n          ...this.getState(), token: token, user: res.data.result!, exists: true, waiting: false\r\n        }, 'Успешно вспомнили сессию');\r\n      }\r\n    } else {\r\n      // Если токена не было, то сбрасываем ожидание (так как по умолчанию true)\r\n      this.setState({\r\n        ...this.getState(), exists: false, waiting: false\r\n      }, 'Сессии нет');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Сброс ошибок авторизации\r\n   */\r\n  resetErrors() {\r\n    this.setState({...this.initState(), errors: null})\r\n  }\r\n}\r\n\r\nexport default SessionState;\r\n","import StoreModule from \"../module\"\r\nimport { IApiResponseUser, IProfileInitState } from \"./types\"\r\n\r\n/**\r\n * Детальная информация о пользователе\r\n */\r\nclass ProfileState extends StoreModule<IProfileInitState > {\r\n\r\n  initState(): IProfileInitState {\r\n    return {\r\n      data: {},\r\n      waiting: false // признак ожидания загрузки\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Загрузка профиля\r\n   * @return {Promise<void>}\r\n   */\r\n  async load() {\r\n    // Сброс текущего профиля и установка признака ожидания загрузки\r\n    this.setState({\r\n      data: {},\r\n      waiting: true\r\n    })\r\n\r\n    const {data}: IApiResponseUser = await this.services.api.request({url: `/api/v1/users/self`})\r\n\r\n    // Профиль загружен успешно\r\n    this.setState({\r\n      data: data.result,\r\n      waiting: false\r\n    }, 'Загружен профиль из АПИ');\r\n  }\r\n}\r\n\r\nexport default ProfileState\r\n","import CatalogState from \"../catalog\" \r\nimport { IResult } from \"../types\"\r\n\r\n/**\r\n * Состояние каталога модалки\r\n */\r\nclass CatalogModalState extends CatalogState {\r\n\r\n     /**\r\n   * Выделение записи по коду\r\n   * @param id\r\n   */\r\n     selectItem(id: string) {\r\n        this.setState({\r\n            ...this.getState(),\r\n          list: this.getState().list.map((item: IResult) => {\r\n            if (item._id === id) {\r\n              // Смена выделения\r\n              return {\r\n                ...item,\r\n                selectedGoods: !item.selectedGoods\r\n              }\r\n            }\r\n            // return item.selected ? {...item, selected: false} : item;\r\n            return item\r\n          })\r\n        })\r\n      }\r\n}\r\n\r\nexport default CatalogModalState","import StoreModule from \"../module\"\r\nimport { ICountriesInitState, IApiResponseCountries, IСountry } from \"./types\"\r\n\r\n/**\r\n * Список стран\r\n */\r\nclass CountriesState extends StoreModule<ICountriesInitState> {\r\n\r\n  /**\r\n   * Начальное состояние\r\n   * @return {Object}\r\n   */\r\n  initState(): ICountriesInitState {\r\n    return {\r\n      list: [],\r\n      waiting: false\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Загрузка списка стран\r\n   */\r\n  async load() {\r\n    this.setState({...this.getState(), waiting: true}, 'Ожидание загрузки стран');\r\n\r\n    const res: IApiResponseCountries = await this.services.api.request({\r\n      url: `/api/v1/countries?lang=ru&limit=228&skip=0&fields=%2A`\r\n    })\r\n    // Список стран загружен успешно\r\n    this.setState({\r\n      ...this.getState(),\r\n      list: res.data.result.items,\r\n      waiting: false\r\n    }, 'Список стран загружен');\r\n  }\r\n\r\n  async search(query: string) {\r\n    this.setState(\r\n      { ...this.getState(), waiting: true },\r\n      \"Ожидание загрузки стран\"\r\n    );\r\n\r\n    const res: IApiResponseCountries = await this.services.api.request({\r\n      url: `/api/v1/countries?search[query]=${query}&fields=items(_id,title,code),count&limit=*`,\r\n    });\r\n\r\n    if (res.status === 200) {\r\n      this.setState(\r\n        {\r\n          ...this.getState(),\r\n          list: res.data.result.items,\r\n          waiting: false,\r\n        },\r\n        \"Страны загружены\"\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Выделение записи \r\n   * @param id\r\n   */\r\n  selectСountry(id: string) {\r\n    this.setState({\r\n        ...this.getState(),\r\n      list: this.getState().list.map((item: IСountry) => {\r\n        if (item._id === id) {\r\n          // Смена выделения\r\n          return {\r\n            ...item,\r\n            selected: !item.selected\r\n          }\r\n        }\r\n        // return item.selected ? {...item, selected: false} : item;\r\n        return item\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nexport default CountriesState","import StoreModule from \"../module\"\r\nimport { IChatState, IChat, TMessages } from \"./types\"\r\nimport generateUniqueId from \"@src/utils/unicque_id\"\r\n\r\n/**\r\n * Список категорий\r\n */\r\nclass ChatState extends StoreModule<IChatState> {\r\n  /**\r\n   * Начальное состояние\r\n   * @return {Object}\r\n   */\r\n  initState(): IChatState {\r\n    return {\r\n      messages: [],\r\n      message: \"\",\r\n      connected: false,\r\n      statusClearChat: false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Установка соединения\r\n   */\r\n  onConnect() {\r\n    this.services.socket.connect(\"example.front.ylab.io/chat\")\r\n\r\n    const socket = this.services.socket.socket!\r\n\r\n    socket.onopen = () => {\r\n      this.setState(\r\n        {\r\n          ...this.getState(),\r\n          connected: true,\r\n        },\r\n        \"Соединение установлено\"\r\n      )\r\n\r\n      const token = localStorage.getItem(\"token\") as string\r\n\r\n      this.services.socket.send(\"auth\", {\r\n        token: token,\r\n      })}\r\n\r\n      socket.onmessage = (event: MessageEvent<any>) => {\r\n        const messages = JSON.parse(event.data) as TMessages\r\n\r\n        if (messages.method === \"auth\") {\r\n          this.requestLatestMessages()\r\n        }\r\n\r\n        if (messages.method === \"last\") {\r\n          if (\"items\" in messages.payload) {\r\n            this.setState({\r\n              ...this.getState(),\r\n              messages: messages.payload.items,\r\n              statusClearChat: false\r\n            })\r\n          }\r\n        }\r\n\r\n        if (messages.method === \"post\") {\r\n          if (!(\"items\" in messages.payload)) {\r\n            this.setState({\r\n              ...this.getState(),\r\n              messages: [\r\n                ...this.getState().messages,\r\n                messages.payload,\r\n              ],\r\n              statusClearChat: false\r\n            })\r\n          }\r\n        }\r\n\r\n        if (messages.method === \"old\") {\r\n          if (\"items\" in messages.payload) {\r\n            this.setState({\r\n              ...this.getState(),\r\n              messages: messages.payload.items,\r\n            })\r\n          }\r\n        }\r\n\r\n        if (messages.method === \"clear\") {\r\n          if (!(\"items\" in messages.payload)) {\r\n            this.setState({\r\n              ...this.getState(),\r\n              messages: [],\r\n              statusClearChat: true\r\n            })\r\n          }\r\n        }\r\n      }\r\n      \r\n      socket.onclose = () => {\r\n         if (this.getState().connected) this.onConnect()\r\n        console.log(\"Socket закрыт\")\r\n      }\r\n\r\n      socket.onerror = () => {\r\n        console.log(\"Socket произошла ошибка\")\r\n      }\r\n    }\r\n\r\n  /**\r\n   * Закрытие WebSocket соединения\r\n   */\r\n  close() {\r\n\r\n    this.setState({\r\n      ...this.getState(),\r\n      connected: false,\r\n    })\r\n\r\n    this.services.socket.close()\r\n\r\n  }\r\n\r\n  /**\r\n   * Отправка нового сообщения\r\n   */\r\n  newMessage() {\r\n    if (this.services.socket.socket) {\r\n      this.services.socket.send(\"post\", {\r\n        _key: generateUniqueId(),\r\n        text: this.getState().message,\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Запрос свежих сообщений\r\n   */\r\n  requestLatestMessages() {\r\n    if (this.services.socket.socket) {\r\n      this.services.socket.send(\"last\", {})\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Запрос старых сообщений\r\n   */\r\n  requestOldMessage() {\r\n\r\n    const id = this.getState().messages[0]._id\r\n\r\n    if (this.services.socket.socket) {\r\n      this.services.socket.send(\"old\", {\r\n        fromId: id,\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Удаление всех сообщений\r\n   */\r\n  deleteAllMessages() {\r\n    if (this.services.socket.socket) {\r\n      this.services.socket.send(\"clear\", {})\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Сохранение нового сообщения\r\n   */\r\n  setMessage(text: string) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      message: text,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Удаление нового сообщения\r\n   */\r\n  deleteMessage() {\r\n    this.setState({\r\n      ...this.getState(),\r\n      message: \"\",\r\n    })\r\n  }\r\n\r\n  // Генерируем искусственную ошибку в сокете\r\ngenerateSocketError() {\r\n  const event = new Event('error');\r\n  this.services.socket.socket!.dispatchEvent(event);\r\n}\r\n}\r\n\r\nexport default ChatState\r\n","import StoreModule from \"../module\"\r\nimport Tool from \"@src/app/drawing/tools/tool\"\r\nimport { ICircle, IRectangle, ILine, IFreeDraw, Shape } from \"./types\"\r\n\r\ninterface ICanvasState {\r\n  canvas: HTMLCanvasElement | null\r\n  tool: Tool | null\r\n  undoList: string[]\r\n  redoList: string[]\r\n  nameTool: string\r\n  figures: (ICircle | IRectangle | ILine | IFreeDraw)[]\r\n}\r\n\r\nclass CanvasState extends StoreModule<ICanvasState> {\r\n  /**\r\n   * Начальное состояние\r\n   * @return {Object}\r\n   */\r\n  initState(): ICanvasState {\r\n    return {\r\n      canvas: null,\r\n      tool: null,\r\n      undoList: [], // Хранение выполненных действий на canvas\r\n      redoList: [],  // Хранение действий на canvas, которые отменили\r\n      nameTool: 'freeDraw', // Название инструмента\r\n      figures: []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Добавление canvas\r\n   */\r\n  setCannvas(canvas: HTMLCanvasElement) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      canvas: canvas\r\n  })\r\n}\r\n\r\n  /**\r\n   * Добавление инструмента\r\n   */\r\n  setTool(tool: Tool, name: string) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      tool: tool,\r\n      nameTool: name\r\n  })\r\n}\r\n\r\n  /**\r\n   * Изменение цвета \r\n   */\r\n  setFillColor(color: string) {\r\n    const currentTool = this.getState().tool\r\n    if (currentTool) currentTool.fillColor = color\r\n    this.setState({\r\n      ...this.getState(),\r\n      tool: currentTool\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Изменение обводки \r\n   */\r\n  setStrokeColor(color: string) {\r\n    const currentTool = this.getState().tool\r\n    if (currentTool) currentTool.strokeColor = color\r\n    this.setState({\r\n      ...this.getState(),\r\n      tool: currentTool\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Изменение ширины\r\n   */\r\n  setLineWidth(width: number) {\r\n    const currentTool = this.getState().tool\r\n    if (currentTool) currentTool.lineWidth = width\r\n    this.setState({\r\n      ...this.getState(),\r\n      tool: currentTool\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Добавление действий в массив \"undoList\"\r\n   */\r\n  pushToUndo(data: any) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      undoList: [...this.getState().undoList, data]\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Добавление действий, которые отменили\r\n   */\r\n  pushToRedo(data: any) {\r\n    this.setState({\r\n      ...this.getState(),\r\n      redoList: [...this.getState().redoList, data]\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Отмена последнего действия\r\n   */\r\n  undo() {\r\n    let ctx = this.getState().canvas!.getContext('2d') as CanvasRenderingContext2D\r\n    if (this.getState().undoList.length > 0) {\r\n        let dataUrl = this.getState().undoList.pop() // Получаем последнее действие\r\n        this.getState().redoList.push(this.getState().canvas!.toDataURL())\r\n        const img = new Image()\r\n        img.src = dataUrl as string\r\n        img.onload = () => {\r\n            ctx.clearRect(0,0, this.getState().canvas!.width, this.getState().canvas!.height)\r\n            ctx.drawImage(img, 0, 0, this.getState().canvas!.width, this.getState().canvas!.height)\r\n        }\r\n    } else {\r\n        ctx.clearRect(0, 0, this.getState().canvas!.width, this.getState().canvas!.height)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Возврат последнего действия\r\n   */\r\n  redo() {\r\n    let ctx = this.getState().canvas!.getContext('2d') as CanvasRenderingContext2D\r\n    if (this.getState().redoList.length > 0) {\r\n        let dataUrl = this.getState().redoList.pop()\r\n        this.getState().undoList.push(this.getState().canvas!.toDataURL())\r\n        let img = new Image()\r\n        img.src = dataUrl as string\r\n        img.onload =  () => {\r\n            ctx.clearRect(0,0, this.getState().canvas!.width, this.getState().canvas!.height)\r\n            ctx.drawImage(img, 0, 0, this.getState().canvas!.width, this.getState().canvas!.height)\r\n        }\r\n    }\r\n}\r\n\r\n  /**\r\n   * Сохранение фигур\r\n   */\r\n  setFigures() {\r\n    const figures = this.getState().tool!.allFiguresTool as any\r\n    this.setState({\r\n      ...this.getState(),\r\n      figures: [...this.getState().figures, ...figures]\r\n  })\r\n}\r\n}\r\n\r\nexport default CanvasState\r\n","import * as modules from './exports'\r\nimport { IConfig } from '../config'\r\nimport Services from '../services' \r\nimport type { Actions, StoreState, ImportModules, IKeysModules, TActions } from './types.ts';\r\n\r\n/**\r\n * Хранилище состояния приложения\r\n */\r\nclass Store {\r\n  services: Services;\r\n  config: IConfig[\"store\"];\r\n  listeners: Array<((...arg: any[]) => void)>;\r\n  actions: Actions & Record<string, any>;\r\n  state: StoreState  & Record<string, any>;\r\n\r\n  constructor(\r\n    services: Services,\r\n    // config = {} as IConfig[\"store\"],\r\n    config: IConfig | {} = {},\r\n    initState = {} as StoreState\r\n  ) {\r\n    this.services = services;\r\n    this.config = config as IConfig[\"store\"];\r\n    this.listeners = []; // Слушатели изменений состояния\r\n    this.state = initState as StoreState;\r\n    /** @type {{\r\n     * basket: BasketState,\r\n     * catalog: CatalogState,\r\n     * modals: ModalsState,\r\n     * article: ArticleState,\r\n     * locale: LocaleState,\r\n     * categories: CategoriesState,\r\n     * session: SessionState,\r\n     * profile: ProfileState,\r\n     * catalog-modal: CatalogModalState,\r\n     * countries: CountriesState,\r\n     * chat: ChatState\r\n     * canvas: CanvasState\r\n     * }} */\r\n    this.actions = {} as Actions;\r\n    const keys = Object.keys(modules) as IKeysModules[];\r\n    for (const name of keys) {\r\n      this.create(name);\r\n    }\r\n  }\r\n\r\n  create<Key extends IKeysModules>(name: Key) {\r\n    const b = modules[name] as ImportModules[Key];\r\n    const a = new b(this, name, this.config?.modules.session || {}) as Actions[Key];\r\n    this.actions[name] = a;\r\n    this.state[name] = this.actions[name].initState() as StoreState[Key];\r\n  }\r\n\r\n  // create<Key extends IKeysModules>(name: Key) {\r\n  //   const module = modules[name] as ImportModules[Key];\r\n  //   const newModule = new module(\r\n  //     this,\r\n  //     name,\r\n  //     this.config?.modules.session || {}\r\n  //   ) as TActions[Key];\r\n  //   this.actions[name] = newModule;\r\n  //   this.state[name] = this.actions[name].initState() as StoreState[Key];\r\n  // }\r\n\r\n\r\n  /**\r\n   * Удаление копии стейта\r\n   */\r\n  delete<Key extends IKeysModules>(name: Key) {\r\n    delete this.actions[name];\r\n    delete this.state[name];\r\n  }\r\n  /**\r\n   * Подписка слушателя на изменения состояния\r\n   * @param listener {Function}\r\n   * @returns {Function} Функция отписки\r\n   */\r\n  subscribe(listener: () => void): () => void {\r\n    this.listeners.push(listener);\r\n    // Возвращается функция для удаления добавленного слушателя\r\n    return () => {\r\n      this.listeners = this.listeners.filter((item) => item !== listener);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Выбор состояния\r\n   * @returns {{\r\n   * basket: Object,\r\n   * catalog: Object,\r\n   * modals: Object,\r\n   * article: Object,\r\n   * locale: Object,\r\n   * categories: Object,\r\n   * session: Object,\r\n   * profile: Object,\r\n   * }}\r\n   */\r\n  getState(): StoreState {\r\n    return this.state as StoreState;\r\n  }\r\n\r\n  /**\r\n   * Установка состояния\r\n   * @param newState {Object}\r\n   */\r\n  setState(newState: StoreState, description = \"setState\") {\r\n    if (this.config.log) {\r\n      console.group(\r\n        `%c${\"store.setState\"} %c${description}`,\r\n        `color: ${\"#777\"}; font-weight: normal`,\r\n        `color: ${\"#333\"}; font-weight: bold`\r\n      );\r\n      console.log(`%c${\"prev:\"}`, `color: ${\"#d77332\"}`, this.state);\r\n      console.log(`%c${\"next:\"}`, `color: ${\"#2fa827\"}`, newState);\r\n      console.groupEnd();\r\n    }\r\n    this.state = newState;\r\n    // Вызываем всех слушателей\r\n    for (const listener of this.listeners) listener(this.state);\r\n  }\r\n}\r\n\r\nexport default Store;\r\n\r\n","// Начальное состояние\r\nexport const initialState = {\r\n  data: {},\r\n  waiting: false // признак ожидания загрузки\r\n}\r\n\r\n// Обработчик действий\r\nfunction reducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case \"article/load-start\":\r\n      return { ...state, data: {}, waiting: true};\r\n\r\n    case \"article/load-success\":\r\n      return { ...state, data: action.payload.data, waiting: false};\r\n\r\n    case \"article/load-error\":\r\n      return { ...state, data: {}, waiting: false}; //@todo текст ошибки сохранить?\r\n\r\n    default:\r\n      // Нет изменений\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","\r\n// Начальное состояние\r\nconst initialState = {\r\n  modals: [],\r\n  activeModal: false,\r\n  statusCatalogModal: null\r\n}\r\n\r\n// Обработчик действий\r\nfunction reducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'modal/open':\r\n      // return {...state, name: [...state.name, action.payload.name], id: [...state.id, action.payload.id]};\r\n      return {...state, modals: [...state.modals, action.payload]};\r\n    case 'modal/close':\r\n      return {...state, modals: action.payload.modals};\r\n    case 'modal/active': \r\n      return {...state, activeModal: action.payload.status}\r\n    case 'modal/status/catalog': \r\n      return {...state, statusCatalogModal: action.payload.status}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","import {applyMiddleware, combineReducers, createStore, compose} from \"redux\"\r\nimport Services from \"../services.js\"\r\nimport thunk from 'redux-thunk'\r\nimport * as reducers from './exports'\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose\r\n  }\r\n}\r\n\r\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nconst composeEnhancers = compose\r\n\r\n// export default function createStoreRedux(services: Services, config = {}){\r\n//   return createStore(combineReducers(reducers), undefined, composeEnhancers(applyMiddleware(thunk.withExtraArgument(services))))\r\n// }\r\n\r\nexport default function createStoreRedux(services: Services, config = {}){\r\n  return createStore(\r\n    combineReducers(reducers), \r\n    undefined, \r\n    // applyMiddleware(thunk.withExtraArgument(services))\r\n    );\r\n}\r\n","import APIService from \"./api\"\r\nimport WebSocketService from \"./socket\"\r\nimport Store from \"./store\"\r\nimport createStoreRedux from \"./store-redux\"\r\nimport { IConfig } from \"./config\"\r\n\r\nclass Services {\r\n  config: IConfig\r\n  private _api?: APIService\r\n  private _socket?: WebSocketService\r\n  private _store?: Store\r\n  private _redux?: any\r\n\r\n\r\n  constructor(config: IConfig) {\r\n    this.config = config;\r\n  }\r\n\r\n  /**\r\n   * Сервис АПИ\r\n   * @returns {APIService}\r\n   */\r\n  get api(): APIService {\r\n    if (!this._api) {\r\n      this._api = new APIService(this, this.config.api);\r\n    }\r\n    return this._api;\r\n  }\r\n\r\n  /**\r\n   * Сервис WebSocket\r\n   * @returns {WebSocketService}\r\n   */\r\n   get socket(): WebSocketService {\r\n      if (!this._socket) {\r\n       this._socket = new WebSocketService(this, this.config.api);\r\n      }\r\n      return this._socket;\r\n     }\r\n\r\n  /**\r\n   * Сервис Store\r\n   * @returns {Store}\r\n   */\r\n  get store(): Store {\r\n    if (!this._store) {\r\n      this._store = new Store(this, this.config.store);\r\n    }\r\n    return this._store;\r\n  }\r\n\r\n  /**\r\n   * Redux store\r\n   */\r\n  get redux(){\r\n    if (!this._redux) {\r\n      this._redux = createStoreRedux(this, this.config.redux);\r\n    }\r\n    return this._redux;\r\n  }\r\n}\r\n\r\nexport default Services;\r\n","const isProduction = process.env.NODE_ENV === 'production'\r\n\r\n/**\r\n * Настройки сервисов\r\n */\r\nconst config = {\r\n  store: {\r\n    // Логировать установку состояния?\r\n    log: !isProduction,\r\n    // Настройки модулей состояния\r\n    modules: {\r\n      session: {\r\n        // Названия токена в АПИ\r\n        tokenHeader: 'X-Token'\r\n      }\r\n    }\r\n  },\r\n  api: {\r\n    baseUrl: ''\r\n  },\r\n  socket: {\r\n    baseUrl: ''\r\n  },\r\n  redux: {}\r\n}\r\n\r\nexport type IConfig = typeof config;\r\nexport default config;\r\n","import {renderToString} from \"react-dom/server\"\r\nimport {StaticRouter} from \"react-router-dom/server\"\r\nimport {Provider} from 'react-redux'\r\nimport {ServicesContext} from \"./context\"\r\nimport {I18nProvider} from \"./i18n/context\"\r\nimport App from './app'\r\nimport Services from \"./services\"\r\nimport config from \"./config\"\r\n\r\ninterface Props {\r\n  path: string\r\n  data: any\r\n}\r\n\r\nconst services = new Services(config)\r\n\r\nexport const render = ({ path, data }: Props) => {\r\n  return renderToString(\r\n     <Provider store={services.redux}>\r\n      <ServicesContext.Provider value={services}>\r\n        <I18nProvider>\r\n          <StaticRouter location={path}>\r\n            <App goods={data}/>\r\n          </StaticRouter>\r\n        </I18nProvider>\r\n      </ServicesContext.Provider>\r\n     </Provider>\r\n  )\r\n}"],"names":["cn","bem","services","SideLayout","Menu","BasketTool","title","value","code","Img","Input","SelectLayout","SelectCustom","Select","Button","page","Item","Spinner","List","Pagination","PageLayout","TopHead","Head","LocaleSelect","Navigation","CatalogList","useSelector","ArticleCard","_a","_b","_c","Field","ProfileCard","useSelectorRedux","id","ItemBasket","ModalLayout","BasketTotal","GoodsQuantityLayout","Basket","GoodsQuantity","Goods","MessageCheck","ChatButton","Textarea","MessageFont","ChatLayout","DrawLeaf","render","params","maxY","DrawingLayout","Toolbar","SettingBar","Canvas","Main","Article","Login","LeafFall","Drawing","Protected","Profile","Chat","Modals","config","initialState","reducer"],"mappings":"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"}